!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.IchiColor=e()}(this,function(){"use strict";var t=function(e){if("object"==typeof this&&this.__isIchiColor)var s=!0;else s=!1;if(!s){var _=new t;return t.apply(_,arguments),_}return!1===this.__initialized&&(this.initSetterGetter(),void 0!=this.__extensionInit&&"function"==typeof this.__extensionInit&&this.__extensionInit(),this.__initialized=!0),this.set.apply(this,arguments),this};return t.prototype.__isIchiColor=!0,t.prototype.__initialized=!1,t.prototype.__pauseUpdate=!1,t.prototype.__pauseUpdate_Hsv=!1,t.prototype.__pauseUpdate_Hwb=!1,t.prototype._getHsl=function(){var t,e,s,_=this._normalizArray([this._r,this._g,this._b],0,255,1);t=_[0],e=_[1],s=_[2];var h,i,r,a=Math.max(t,e,s),n=((h=Math.min(t,e,s))+a)/2;if(h===a)i=0,r=0;else{var o=a-h;switch(r=n<=.5?o/(a+h):o/(2-a-h),a){case t:i=(e-s)/o+(e<s?6:0);break;case e:i=(s-t)/o+2;break;case s:i=(t-e)/o+4}i/=6}return i*=360,r*=100,n*=100,i=Math.round(i),r=Math.round(r),n=Math.round(n),(i<0||r<0||r>100||n<0||n>100)&&console.error("rgb",_,{r:t,g:e,b:s,h:i,s:r,l:n,d:void 0,max:a,min:h},[this._r,this._g,this._b]),{h:i,s:r,l:n}},t.prototype._getHsv=function(){var e,s,_,h,i,r,a=t.prototype._normaliz(this.r,0,255,1),n=t.prototype._normaliz(this.g,0,255,1),o=t.prototype._normaliz(this.b,0,255,1);if(i=e=Math.max(a,n,o),r=e-(s=Math.min(a,n,o)),h=0===e?0:r/e,e===s)_=0;else{switch(e){case a:_=(n-o)/r+(n<o?6:0);break;case n:_=(o-a)/r+2;break;case o:_=(a-n)/r+4}_/=6}return{h:_=Math.round(360*_),s:h=Math.round(100*h),v:i=Math.round(100*i)}},t.prototype._getHwb=function(){var e=t.prototype._RGB_to_HSV([this.r,this.g,this.b]);return{h:e[0],w:Math.round((100-e[1])*e[2]/100),b:Math.round(100-e[2])}},t.prototype._setFromRgba=function(t){var e=/[0-9\.]+/,s=t.split(",");if(s.length>=3){this.__pauseUpdate=!0;var _=e.exec(s[0]);_.length>0&&(this.r=Number.parseInt(_[0])),(_=e.exec(s[1])).length>0&&(this.g=Number.parseInt(_[0])),(_=e.exec(s[2])).length>0&&(this.b=Number.parseInt(_[0])),4==s.length&&(_=e.exec(s[3])).length>0&&_>=0&&_<=1&&(this.alpha=+_[0]),this.__pauseUpdate=!1,this.__undateValue()}},t.prototype._setFromHsv=function(e){var s,_,h,i,r,a,n,o,l=t.prototype._normaliz(e.s,0,100,1),u=t.prototype._normaliz(e.v,0,100,1),b=e.h/60;switch(360==e.h&&(b=0),a=u*(1-l),n=u*(1-l*(r=b-(i=Math.floor(b)))),o=u*(1-l*(1-r)),i){case 0:s=u,_=o,h=a;break;case 1:s=n,_=u,h=a;break;case 2:s=a,_=u,h=o;break;case 3:s=a,_=n,h=u;break;case 4:s=o,_=a,h=u;break;case 5:s=u,_=a,h=n}var p=t.prototype._normaOutRGB(t.prototype._normalizArray([s,_,h],0,1,255));return this.__pauseUpdate=!0,this.r=p[0],this.g=p[1],this.b=p[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsv=!0,this.__undateValue(),this.__pauseUpdate_Hsv=!1,this.__freshly_hsv=!0,this},t.prototype._setFromHwb=function(e){var s,_,h;if(this.__freshly_hwb=!0,360==(s=e.h)&&(s=0),100==e.b)var i=0;else i=e.w/(100-e.b);_=100-100*i,h=100-e.b;var r=t.prototype._HSV_to_RGB([s,_,h]);return this.__pauseUpdate=!0,this.r=r[0],this.g=r[1],this.b=r[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hwb=!0,this.__undateValue(),this.__pauseUpdate_Hwb=!1,this.__freshly_hwb=!0,this},t.prototype._HSV_to_RGB=function(e){var s,_,h,i,r,a,n,o;if(0===u)return[0,0,0];var l=t.prototype._normaliz(e[1],0,100,1),u=t.prototype._normaliz(e[2],0,100,1),b=e[0]/60;switch(a=u*(1-l),n=u*(1-l*(r=b-(i=Math.floor(b)))),o=u*(1-l*(1-r)),i){case 0:s=u,_=o,h=a;break;case 1:s=n,_=u,h=a;break;case 2:s=a,_=u,h=o;break;case 3:s=a,_=n,h=u;break;case 4:s=o,_=a,h=u;break;case 5:s=u,_=a,h=n}return t.prototype._normaOutRGB(t.prototype._normalizArray([s,_,h],0,1,255))},t.prototype._RGB_to_HSV=function(e){var s,_,h,i,r,a,n=t.prototype._normaliz(e[0],0,255,1),o=t.prototype._normaliz(e[1],0,255,1),l=t.prototype._normaliz(e[2],0,255,1);if(r=s=Math.max(n,o,l),a=s-(_=Math.min(n,o,l)),i=0===s?0:a/s,s===_)h=0;else{switch(s){case n:h=(o-l)/a+(o<l?6:0);break;case o:h=(l-n)/a+2;break;case l:h=(n-o)/a+4}h/=6}return[h=Math.round(360*h),i=Math.round(100*i),r=Math.round(100*r)]},t.prototype._setFromHsl=function(e){this.__freshly_hsl=!0;var s=e.h,_=t.prototype._normaliz(e.s,0,100,1),h=t.prototype._normaliz(e.l,0,100,1);if(360==s&&(s=0),void 0==s)return[0,0,0];var i,r,a,n=(1-Math.abs(2*h-1))*_,o=s/60,l=n*(1-Math.abs(o%2-1));0===(o=Math.floor(o))?(i=n,r=l,a=0):1===o?(i=l,r=n,a=0):2===o?(i=0,r=n,a=l):3===o?(i=0,r=l,a=n):4===o?(i=l,r=0,a=n):5===o&&(i=n,r=0,a=l);var u=h-n/2;i+=u,r+=u,a+=u;var b=t.prototype._normaOutRGB(t.prototype._normalizArray([i,r,a],0,1,255));return this.__pauseUpdate=!0,this.r=b[0],this.g=b[1],this.b=b[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsl=!0,this.__undateValue(),this.__pauseUpdate_Hsl=!1,this.__freshly_hsl=!0,this},t.prototype._normalizArray=function(t,e,s,_){for(var h=0;h<t.length;h++)t[h]=this._normaliz(t[h],e,s,_);return t},t.prototype._normaliz=function(t,e,s,_){var h=0;return 4==arguments.length?(h=(t-e)/(s-e),h*=_):h=arguments[0]/255,h},t.prototype._normaOutRGB=function(t){var e=0;for(e=0;e<t.length;e++)t[e]=Math.round(t[e]),(t[e]<0||-0==t[e])&&(t[e]=0);return t},t.prototype.set=function(t){if(0==arguments.length)this.__pauseUpdate=!0,this.r=0,this.g=0,this.__pauseUpdate=!1,this.b=0,this.alpha=1;else if(1===arguments.length){var e;if(arguments[0].constructor===String)if("#"===arguments[0][0]){if(4===arguments[0].length){var s=Number.parseInt(arguments[0].slice(1),16);this.r=s>>8&15|s>>4&240,this.g=s>>4&15|240&s,this.b=(15&s)<<4|15&s}if(5===arguments[0].length){_=((15&(_=Number.parseInt(arguments[0].slice(1,2),16)))<<4|15&_)/255,this.alpha=_.toFixed(3);s=Number.parseInt(arguments[0].slice(2),16);this.r=s>>8&15|s>>4&240,this.g=s>>4&15|240&s,this.b=(15&s)<<4|15&s}else if(7===arguments[0].length)arguments[0]=Number.parseInt(arguments[0].slice(1),16),e="number";else if(9===arguments[0].length){var _=Number.parseInt(arguments[0].slice(1,3),16);this.alpha=(_/255).toFixed(3),arguments[0]=Number.parseInt(arguments[0].slice(3),16),e="number"}}else"r"===arguments[0][0]?this._setFromRgba(arguments[0]):arguments[0]==+arguments[0]&&(e="number",arguments[0]=+arguments[0]);arguments[0].constructor===Number||"number"==e?(this.r=arguments[0]>>16,this.g=arguments[0]>>8&255,this.b=255&arguments[0]):Array.isArray(arguments[0])?3==arguments[0].length&&(this.__pauseUpdate=!0,this.r=arguments[0][0],this.g=arguments[0][1],this.__pauseUpdate=!1,this.b=arguments[0][2]):arguments[0].constructor===Object&&(void 0!=arguments[0].h?void 0!=arguments[0].v?(this.hsv._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsv._s=arguments[0].s),this.hsv._v=arguments[0].v,this._setFromHsv({h:this.hsv._h,s:this.hsv._s,v:this.hsv._v})):void 0!=arguments[0].l?(this.hsl._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsl._s=arguments[0].s),this.hsl._l=arguments[0].l,this._setFromHsl({h:this.hsl._h,s:this.hsl._s,l:this.hsl._l})):void 0!=arguments[0].w&&(this.hwb._h=arguments[0].h,void 0!=arguments[0].w&&(this.hwb._w=arguments[0].w),void 0!=arguments[0].b&&(this.hwb._b=arguments[0].b),this._setFromHwb({h:this.hwb._h,w:this.hwb._w,b:this.hwb._b})):(void 0!=arguments[0].r?this.r=arguments[0].r:void 0!=arguments[0].red&&(this.r=arguments[0].red),void 0!=arguments[0].g?this.g=arguments[0].g:void 0!=arguments[0].green?this.g=arguments[0].green:void 0!=arguments[0].grain&&(this.g=arguments[0].grain),void 0!=arguments[0].b?this.b=arguments[0].b:void 0!=arguments[0].blue&&(this.b=arguments[0].blue),void 0!=arguments[0].a?this.alpha=arguments[0].a:void 0!=arguments[0].alpha&&(this.alpha=arguments[0].alpha)))}else 3===arguments.length&&(this.__pauseUpdate=!0,this.r=arguments[0],this.g=arguments[1],this.__pauseUpdate=!1,this.b=arguments[2]);return this},t.prototype.initSetterGetter=function(){this._alpha=1,this._rgba="rgba(0, 0, 0, 1)",this._rgb="rgba(0, 0, 0)",this._r=0,this._r_intPart=0,this._r_hexChar="00",this._g=0,this._g_intPart=0,this._g_hexChar="00",this._b=0,this._b_intPart=0,this._b_hexChar="00",this._rgbInt=0,this._rgbHex="#000000",this._argbHex="#ff000000",Object.defineProperty(this,"r",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._r=t,this._r_intPart=t<<16;var e=t.toString(16);1==e.length&&(e="0"+e),this._r_hexChar=e,this.__undateValue()},get:function(){return this._r}}),Object.defineProperty(this,"g",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._g=t,this._g_intPart=t<<8;var e=t.toString(16);1==e.length&&(e="0"+e),this._g_hexChar=e,this.__undateValue()},get:function(){return this._g}}),Object.defineProperty(this,"b",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._b=t,this._b_intPart=t;var e=t.toString(16);1==e.length&&(e="0"+e),this._b_hexChar=e,this.__undateValue()},get:function(){return this._b}}),Object.defineProperty(this,"int",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,16777215),this.__pauseUpdate=!0,this.r=t>>16,this.g=t>>8&255,this.b=255&t,this.__pauseUpdate=!1,this.__undateValue()},get:function(){return this._rgbInt}}),Object.defineProperty(this,"hex",{set:function(t){if("#"===t[0])if(4===t.length){var e=Number.parseInt(t.slice(1),16);this.__pauseUpdate=!0,this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e,this.__pauseUpdate=!1,this.__undateValue()}else 7===t.length&&(t=Number.parseInt(t.slice(1),16),this.int=t)},get:function(){return this._rgbHex}}),Object.defineProperty(this,"ahex",{set:function(t){if("#"===t[0])if(5===t.length){this.__pauseUpdate=!0,s=((15&(s=Number.parseInt(arguments[0].slice(1,2),16)))<<4|15&s)/255,this.alpha=s.toFixed(3);var e=Number.parseInt(arguments[0].slice(2),16);this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e,this.__pauseUpdate=!1,this.__undateValue()}else if(9===t.length){var s=Number.parseInt(arguments[0].slice(1,3),16);this.alpha=(s/255).toFixed(3),t=Number.parseInt(arguments[0].slice(3),16),this.int=t}},get:function(){this.alpha;var t=Math.round(255*this.alpha).toString(16);return 1==t.length&&(t="0"+t),"#"+t+this._rgbHex.slice(1)}}),Object.defineProperty(this,"argb",{set:function(t){this.ahex=t},get:function(){return this.ahex}}),Object.defineProperty(this,"hexa",{set:function(t){if("#"===t[0])if(5===t.length){this.__pauseUpdate=!0,s=((15&(s=Number.parseInt(arguments[0].slice(4,5),16)))<<4|15&s)/255,this.alpha=s.toFixed(3);var e=Number.parseInt(arguments[0].slice(1,4),16);this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e,this.__pauseUpdate=!1,this.__undateValue()}else if(9===t.length){var s=Number.parseInt(arguments[0].slice(7,9),16);this.alpha=(s/255).toFixed(3),t=Number.parseInt(arguments[0].slice(1,7),16),this.int=t}},get:function(){return"#"+this.ahex.slice(3,9)+this.ahex.slice(1,3)}}),this.__use_rgb=!1,this.__freshly_rgb=!1,Object.defineProperty(this,"rgb",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgb&&(this.__use_rgb=!0),1!=this.__freshly_rgb&&this.__undatePart_Rgb(),this._rgb}}),this.__use_rgba=!1,this.__freshly_rgba=!1,Object.defineProperty(this,"rgba",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgba&&(this.__use_rgba=!0),1!=this.__freshly_rgba&&this.__undatePart_Rgba(),this._rgba}}),Object.defineProperty(this,"alpha",{set:function(t){t=+t,t=this.__colorValueRange(t,0,1),this._alpha=t,this.__undatePart_Rgba()},get:function(){return this._alpha}}),this.__use_hsv=!1,this.__freshly_hsv=!1,this.hsv={_h:0,_s:0,_v:0},Object.defineProperty(this.hsv,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsv,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._h}}),Object.defineProperty(this.hsv,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._s}}),Object.defineProperty(this.hsv,"v",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._v=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._v}}),this.__use_hsl=!1,this.__freshly_hsl=!1,this.hsl={_h:0,_s:0,_l:0},Object.defineProperty(this.hsl,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsl,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._h}}),Object.defineProperty(this.hsl,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._s}}),Object.defineProperty(this.hsl,"l",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._l=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._l}}),this.__use_hwb=!1,this.__freshly_hwb=!1,this.hwb={_h:0,_w:0,_b:0},Object.defineProperty(this.hwb,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hwb,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._h}}),Object.defineProperty(this.hwb,"w",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._w=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._w}}),Object.defineProperty(this.hwb,"b",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._b=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._b}})},t.prototype.__undateValue=function(){this.__pauseUpdate||(this._rgbInt=this._r_intPart+this._g_intPart+this._b_intPart,this._rgbHex="#"+this._r_hexChar+this._g_hexChar+this._b_hexChar,this.__freshly_hsl=!1,this.__freshly_hsv=!1,this.__freshly_hwb=!1,this.__freshly_rgb=!1,this.__freshly_rgba=!1,this.__use_hsv&&1!=this.__pauseUpdate_Hsv&&this.__undatePart_Hsv(),this.__use_hsl&&1!=this.__pauseUpdate_Hsl&&this.__undatePart_Hsl(),this.__use_hwb&&1!=this.__pauseUpdate_Hwb&&this.__undatePart_Hwb(),this.__use_rgba&&this.__undatePart_Rgba(),void 0!=this.__extensionSettingEvent&&this.__extensionSettingEvent())},t.prototype.__undatePart_Hsv=function(){var t=this._getHsv();this.hsv._h=t.h,this.hsv._s=t.s,this.hsv._v=t.v,this.__freshly_hsv=!0},t.prototype.__undatePart_Hsl=function(){var t=this._getHsl();this.hsl._h=t.h,this.hsl._s=t.s,this.hsl._l=t.l,this.__freshly_hsl=!0},t.prototype.__undatePart_Hwb=function(){var t=this._getHwb();this.hwb._h=t.h,this.hwb._w=t.w,this.hwb._b=t.b,this.__freshly_hwb=!0},t.prototype.__undatePart_Rgba=function(){this._rgba="rgba("+this._r+", "+this._g+", "+this._b+", "+this.alpha+")",this.__freshly_rgba=!0},t.prototype.__undatePart_Rgb=function(){this._rgb="rgb("+this._r+", "+this._g+", "+this._b+")",this.__freshly_rgb=!0},t.prototype.__colorValueRange=function(t,e,s){return t>s?s:t<e?e:t},t.prototype.getRGB=function(){return{r:this.r,g:this.g,b:this.b}},t.prototype.getHSL=function(){return{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l}},t.prototype.getHSV=function(){return{h:this.hsv.h,s:this.hsv.s,v:this.hsv.v}},t.prototype.getHWB=function(){return{h:this.hwb.h,w:this.hwb.w,b:this.hwb.b}},t.prototype.getRedGreenBlue=function(){return{red:this.r,green:this.g,blue:this.b}},t.prototype.getRedGrainBlue=function(){return{red:this.r,grain:this.g,blue:this.b}},t.prototype.getClone=function(){return new t({r:this.r,g:this.g,b:this.b,a:this.alpha})},t.prototype.getInvertColor=function(){return new t({r:255-this.r,g:255-this.g,b:255-this.b})},t});
