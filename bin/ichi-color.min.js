!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):t.IchiColor=s()}(this,function(){"use strict";var t=function(s){if("object"==typeof this&&this.__isIchiColor)var e=!0;else var e=!1;if(!e){var _=new t;return t.apply(_,arguments),_}return!1===this.__initialized&&(this.initSetterGetter(),void 0!=this.__extensionInit&&"function"==typeof this.__extensionInit&&this.__extensionInit(),this.__initialized=!0),this.set.apply(this,arguments),this};return t.prototype.__isIchiColor=!0,t.prototype.__initialized=!1,t.prototype.__pauseUpdate=!1,t.prototype.__pauseUpdate_Hsv=!1,t.prototype.__pauseUpdate_Hwb=!1,t.prototype._rgb=function(){return{r:this.r,g:this.g,b:this.b}},t.prototype._gethex=function(){var t=this.r.toString(16),s=this.g.toString(16),e=this.b.toString(16),_="#";return 1==t.length?_=_+"0"+t:_+=t,1==s.length?_=_+"0"+s:_+=s,1==e.length?_=_+"0"+e:_+=e,_},t.prototype.adjust_hueSaturation=function(t,s,e){var _=this._getHsv();return void 0!=t&&(_.h=_.h+t,_.h<0&&(_.h=360-_.h),_.h>360&&(_.h=_.h-360)),void 0!=s&&(_.s=_.s+s,_.s<0&&(_.s=0),_.s>100&&(_.s=100)),void 0!=e&&(_.v=_.v+e,_.v<0&&(_.v=0),_.v>100&&(_.v=100)),this._setFromHsv(_),this},t.prototype._getHsl=function(){var t,s,e,_,h,i,r,n,o,a=this._normalizArray([this._r,this._g,this._b],0,255,1);if(t=a[0],s=a[1],e=a[2],n=Math.max(t,s,e),o=Math.min(t,s,e),i=(n+o)/2,n===o)_=h=0;else{switch(r=n-o,h=i>.5?r/(2-n-o):r/(n+o),n){case t:_=(s-e)/r+(s<e?6:0);break;case s:_=(e-t)/r+2;break;case e:_=(t-s)/r+4}_/=6}return _*=360,h*=100,i*=100,_=Math.round(_),h=Math.round(h),i=Math.round(i),(_<0||h<0||h>100||i<0||i>100)&&console.error("rgb",a,{r:t,g:s,b:e,h:_,s:h,l:i,d:r,max:n,min:o},[this._r,this._g,this._b]),{h:_,s:h,l:i}},t.prototype._getHsv=function(){var s,e,_,h,i,r,n=t.prototype._normaliz(this.r,0,255,1),o=t.prototype._normaliz(this.g,0,255,1),a=t.prototype._normaliz(this.b,0,255,1);if(s=Math.max(n,o,a),e=Math.min(n,o,a),i=s,r=s-e,h=0===s?0:r/s,s===e)_=0;else{switch(s){case n:_=(o-a)/r+(o<a?6:0);break;case o:_=(a-n)/r+2;break;case a:_=(n-o)/r+4}_/=6}return _=Math.round(360*_),h=Math.round(100*h),i=Math.round(100*i),{h:_,s:h,v:i}},t.prototype._getHwb=function(){var s,e,_,h=t.prototype._RGB_to_HSV([this.r,this.g,this.b]);return s=h[0],e=Math.round((100-h[1])*h[2]/100),_=Math.round(100-h[2]),{h:s,w:e,b:_}},t.prototype._setFromRgba=function(t){var s=/[0-9\.]+/,e=t.split(",");if(e.length>=3){this.__pauseUpdate=!0;var _=s.exec(e[0]);_.length>0&&(this.r=Number.parseInt(_[0])),_=s.exec(e[1]),_.length>0&&(this.g=Number.parseInt(_[0])),_=s.exec(e[2]),_.length>0&&(this.b=Number.parseInt(_[0])),4==e.length&&(_=s.exec(e[3]),_.length>0&&_>=0&&_<=1&&(this.alpha=+_[0])),this.__pauseUpdate=!1,this.__undateValue()}},t.prototype._setFromHsv=function(s){var e,_,h,i,r,n,o,a,u=t.prototype._normaliz(s.s,0,100,1),l=t.prototype._normaliz(s.v,0,100,1),b=s.h/60;switch(360==s.h&&(b=0),i=Math.floor(b),r=b-i,n=l*(1-u),o=l*(1-u*r),a=l*(1-u*(1-r)),i){case 0:e=l,_=a,h=n;break;case 1:e=o,_=l,h=n;break;case 2:e=n,_=l,h=a;break;case 3:e=n,_=o,h=l;break;case 4:e=a,_=n,h=l;break;case 5:e=l,_=n,h=o}var p=t.prototype._normaOutRGB(t.prototype._normalizArray([e,_,h],0,1,255));return this.__pauseUpdate=!0,this.r=p[0],this.g=p[1],this.b=p[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsv=!0,this.__undateValue(),this.__pauseUpdate_Hsv=!1,this.__freshly_hsv=!0,this},t.prototype._setFromHwb=function(s){this.__freshly_hwb=!0;var e,_,h;if(e=s.h,360==e&&(e=0),100==s.b)var i=0;else var i=s.w/(100-s.b);_=100-100*i,h=100-s.b;var r=t.prototype._HSV_to_RGB([e,_,h]);return this.__pauseUpdate=!0,this.r=r[0],this.g=r[1],this.b=r[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hwb=!0,this.__undateValue(),this.__pauseUpdate_Hwb=!1,this.__freshly_hwb=!0,this},t.prototype._HSV_to_RGB=function(s){var e,_,h,i,r,n,o,a;if(0===l)return[0,0,0];var u=t.prototype._normaliz(s[1],0,100,1),l=t.prototype._normaliz(s[2],0,100,1),b=s[0]/60;switch(i=Math.floor(b),r=b-i,n=l*(1-u),o=l*(1-u*r),a=l*(1-u*(1-r)),i){case 0:e=l,_=a,h=n;break;case 1:e=o,_=l,h=n;break;case 2:e=n,_=l,h=a;break;case 3:e=n,_=o,h=l;break;case 4:e=a,_=n,h=l;break;case 5:e=l,_=n,h=o}return t.prototype._normaOutRGB(t.prototype._normalizArray([e,_,h],0,1,255))},t.prototype._RGB_to_HSV=function(s){var e,_,h,i,r,n,o=t.prototype._normaliz(s[0],0,255,1),a=t.prototype._normaliz(s[1],0,255,1),u=t.prototype._normaliz(s[2],0,255,1);if(e=Math.max(o,a,u),_=Math.min(o,a,u),r=e,n=e-_,i=0===e?0:n/e,e===_)h=0;else{switch(e){case o:h=(a-u)/n+(a<u?6:0);break;case a:h=(u-o)/n+2;break;case u:h=(o-a)/n+4}h/=6}return h=Math.round(360*h),i=Math.round(100*i),r=Math.round(100*r),[h,i,r]},t.prototype._setFromHsl=function(s){this.__freshly_hsl=!0;var e=s.h,_=t.prototype._normaliz(s.s,0,100,1),h=t.prototype._normaliz(s.l,0,100,1);if(360==e&&(e=0),void 0==e)return[0,0,0];var i=(1-Math.abs(2*h-1))*_,r=e/60,n=i*(1-Math.abs(r%2-1));r=Math.floor(r);var o,a,u;0===r?(o=i,a=n,u=0):1===r?(o=n,a=i,u=0):2===r?(o=0,a=i,u=n):3===r?(o=0,a=n,u=i):4===r?(o=n,a=0,u=i):5===r&&(o=i,a=0,u=n);var l=h-i/2;o+=l,a+=l,u+=l;var b=t.prototype._normaOutRGB(t.prototype._normalizArray([o,a,u],0,1,255));return this.__pauseUpdate=!0,this.r=b[0],this.g=b[1],this.b=b[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsl=!0,this.__undateValue(),this.__pauseUpdate_Hsl=!1,this.__freshly_hsl=!0,this},t.prototype._normalizArray=function(t,s,e,_){for(var h=0;h<t.length;h++)t[h]=this._normaliz(t[h],s,e,_);return t},t.prototype._normaliz=function(t,s,e,_){var h=0;return 4==arguments.length?(h=(t-s)/(e-s),h*=_):h=arguments[0]/255,h},t.prototype._normaOutRGB=function(t){var s=0;for(s=0;s<t.length;s++)t[s]=Math.round(t[s]),(t[s]<0||-0==t[s])&&(t[s]=0);return t},t.prototype.set=function(t){if(0==arguments.length)this.__pauseUpdate=!0,this.r=0,this.g=0,this.__pauseUpdate=!1,this.b=0,this.alpha=1;else if(1===arguments.length){var s;if(arguments[0].constructor===String)if("#"===arguments[0][0]){if(4===arguments[0].length){var e=Number.parseInt(arguments[0].slice(1),16);this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e}if(5===arguments[0].length){var _=Number.parseInt(arguments[0].slice(1,2),16);this.alpha=(15&_)<<4|15&_;var e=Number.parseInt(arguments[0].slice(2),16);this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e}else if(7===arguments[0].length)arguments[0]=Number.parseInt(arguments[0].slice(1),16),s="number";else if(9===arguments[0].length){var _=Number.parseInt(arguments[0].slice(1,3),16);this.alpha=_,arguments[0]=Number.parseInt(arguments[0].slice(3),16),s="number"}}else"r"===arguments[0][0]?this._setFromRgba(arguments[0]):arguments[0]==+arguments[0]&&(s="number",arguments[0]=+arguments[0]);arguments[0].constructor===Number||"number"==s?(this.r=arguments[0]>>16,this.g=arguments[0]>>8&255,this.b=255&arguments[0]):Array.isArray(arguments[0])?3==arguments[0].length&&(this.__pauseUpdate=!0,this.r=arguments[0][0],this.g=arguments[0][1],this.__pauseUpdate=!1,this.b=arguments[0][2]):arguments[0].constructor===Object&&(void 0!=arguments[0].h?void 0!=arguments[0].v?(this.hsv._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsv._s=arguments[0].s),this.hsv._v=arguments[0].v,this._setFromHsv({h:this.hsv._h,s:this.hsv._s,v:this.hsv._v})):void 0!=arguments[0].l?(this.hsl._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsl._s=arguments[0].s),this.hsl._l=arguments[0].l,this._setFromHsl({h:this.hsl._h,s:this.hsl._s,l:this.hsl._l})):void 0!=arguments[0].w&&(this.hwb._h=arguments[0].h,void 0!=arguments[0].w&&(this.hwb._w=arguments[0].w),void 0!=arguments[0].b&&(x,this.hwb._b=arguments[0].b),this._setFromHwb({h:this.hwb._h,w:this.hwb._w,b:this.hwb._b})):(void 0!=arguments[0].r?this.r=arguments[0].r:void 0!=arguments[0].red&&(this.r=arguments[0].red),void 0!=arguments[0].g?this.g=arguments[0].g:void 0!=arguments[0].green?this.g=arguments[0].green:void 0!=arguments[0].grain&&(this.g=arguments[0].grain),void 0!=arguments[0].b?this.b=arguments[0].b:void 0!=arguments[0].blue&&(this.b=arguments[0].blue),void 0!=arguments[0].a?this.alpha=arguments[0].a:void 0!=arguments[0].alpha&&(this.alpha=arguments[0].alpha)))}else 3===arguments.length&&(this.__pauseUpdate=!0,this.r=arguments[0],this.g=arguments[1],this.__pauseUpdate=!1,this.b=arguments[2]);return this},t.prototype.initSetterGetter=function(){this._alpha=1,this._rgba="rgba(0, 0, 0, 1)",this._rgb="rgba(0, 0, 0)",this._r=0,this._r_intPart=0,this._r_hexChar="00",this._g=0,this._g_intPart=0,this._g_hexChar="00",this._b=0,this._b_intPart=0,this._b_hexChar="00",this._rgbInt=0,this._rgbHex="#000000",this._argbHex="#ff000000",Object.defineProperty(this,"r",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._r=t,this._r_intPart=t<<16;var s=t.toString(16);1==s.length&&(s="0"+s),this._r_hexChar=s,this.__undateValue()},get:function(){return this._r}}),Object.defineProperty(this,"g",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._g=t,this._g_intPart=t<<8;var s=t.toString(16);1==s.length&&(s="0"+s),this._g_hexChar=s,this.__undateValue()},get:function(){return this._g}}),Object.defineProperty(this,"b",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._b=t,this._b_intPart=t;var s=t.toString(16);1==s.length&&(s="0"+s),this._b_hexChar=s,this.__undateValue()},get:function(){return this._b}}),Object.defineProperty(this,"int",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,16777215),this.__pauseUpdate=!0,this.r=t>>16,this.g=t>>8&255,this.b=255&t,this.__pauseUpdate=!1,this.__undateValue()},get:function(){return this._rgbInt}}),Object.defineProperty(this,"hex",{set:function(t){if("#"===t[0])if(4===t.length){var s=Number.parseInt(t.slice(1),16);this.__pauseUpdate=!0,this.r=s>>8&15|s>>4&240,this.g=s>>4&15|240&s,this.b=(15&s)<<4|15&s,this.__pauseUpdate=!1,this.__undateValue()}else 7===t.length&&(t=Number.parseInt(t.slice(1),16),this.int=t)},get:function(){return this._rgbHex}}),Object.defineProperty(this,"ahex",{set:function(t){if("#"===t[0])if(5===t.length){this.__pauseUpdate=!0;var s=Number.parseInt(t.slice(1,2),16);this.alpha=(15&s)<<4|15&s;var e=Number.parseInt(t.slice(2),16);this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e,this.__pauseUpdate=!1,this.__undateValue()}else if(7===t.length){var s=Number.parseInt(t.slice(1,3),16);this.alpha=s,t=Number.parseInt(t.slice(3),16),this.int=t}},get:function(){return this._rgbHex}}),Object.defineProperty(this,"argb",{set:function(t){this.ahex=t},get:function(){return this._rgbHex}}),this.__use_rgb=!1,this.__freshly_rgb=!1,Object.defineProperty(this,"rgb",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgb&&(this.__use_rgb=!0),1!=this.__freshly_rgb&&this.__undatePart_Rgb(),this._rgb}}),this.__use_rgba=!1,this.__freshly_rgba=!1,Object.defineProperty(this,"rgba",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgba&&(this.__use_rgba=!0),1!=this.__freshly_rgba&&this.__undatePart_Rgba(),this._rgba}}),Object.defineProperty(this,"alpha",{set:function(t){t=+t,t=this.__colorValueRange(t,0,1),this._alpha=t,this.__undatePart_Rgba()},get:function(){return this._alpha}}),this.__use_hsv=!1,this.__freshly_hsv=!1,this.hsv={_h:0,_s:0,_v:0},Object.defineProperty(this.hsv,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsv,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._h}}),Object.defineProperty(this.hsv,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._s}}),Object.defineProperty(this.hsv,"v",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._v=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._v}}),this.__use_hsl=!1,this.__freshly_hsl=!1,this.hsl={_h:0,_s:0,_l:0},Object.defineProperty(this.hsl,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsl,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._h}}),Object.defineProperty(this.hsl,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._s}}),Object.defineProperty(this.hsl,"l",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._l=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._l}}),this.__use_hwb=!1,this.__freshly_hwb=!1,this.hwb={_h:0,_w:0,_b:0},Object.defineProperty(this.hwb,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hwb,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._h}}),Object.defineProperty(this.hwb,"w",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._w=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._w}}),Object.defineProperty(this.hwb,"b",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._b=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._b}})},t.prototype.__undateValue=function(){this.__pauseUpdate||(this._rgbInt=this._r_intPart+this._g_intPart+this._b_intPart,this._rgbHex="#"+this._r_hexChar+this._g_hexChar+this._b_hexChar,this.__freshly_hsl=!1,this.__freshly_hsv=!1,this.__freshly_hwb=!1,this.__freshly_rgb=!1,this.__freshly_rgba=!1,this.__use_hsv&&1!=this.__pauseUpdate_Hsv&&this.__undatePart_Hsv(),this.__use_hsl&&1!=this.__pauseUpdate_Hsl&&this.__undatePart_Hsl(),this.__use_hwb&&1!=this.__pauseUpdate_Hwb&&this.__undatePart_Hwb(),this.__use_rgba&&this.__undatePart_Rgba(),void 0!=this.__extensionSettingEvent&&this.__extensionSettingEvent())},t.prototype.__undatePart_Hsv=function(){var t=this._getHsv();this.hsv._h=t.h,this.hsv._s=t.s,this.hsv._v=t.v,this.__freshly_hsv=!0},t.prototype.__undatePart_Hsl=function(){var t=this._getHsl();this.hsl._h=t.h,this.hsl._s=t.s,this.hsl._l=t.l,this.__freshly_hsl=!0},t.prototype.__undatePart_Hwb=function(){var t=this._getHwb();this.hwb._h=t.h,this.hwb._w=t.w,this.hwb._b=t.b,this.__freshly_hwb=!0},t.prototype.__undatePart_Rgba=function(){this._rgba="rgba("+this._r+", "+this._g+", "+this._b+", "+this.alpha+")",this.__freshly_rgba=!0},t.prototype.__undatePart_Rgb=function(){this._rgb="rgb("+this._r+", "+this._g+", "+this._b+")",this.__freshly_rgb=!0},t.prototype.__colorValueRange=function(t,s,e){return t>e?e:t<s?s:t},t.prototype.getRGB=function(){return{r:this.r,g:this.g,b:this.b}},t.prototype.getHSL=function(){return{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l}},t.prototype.getHSV=function(){return{h:this.hsv.h,s:this.hsv.s,v:this.hsv.v}},t.prototype.getHWB=function(){return{h:this.hwb.h,w:this.hwb.w,b:this.hwb.b}},t.prototype.getRedGreenBlue=function(){return{red:this.r,green:this.g,blue:this.b}},t.prototype.getRedGrainBlue=function(){return{red:this.r,grain:this.g,blue:this.b}},t.prototype.getClone=function(){return new t({r:this.r,g:this.g,b:this.b})},t.prototype.getInvertColor=function(){return new t({r:255-this.r,g:255-this.g,b:255-this.b})},t});
