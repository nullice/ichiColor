!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.expandIchiColor=e()}(this,function(){"use strict";function t(){this._xyz={X:0,Y:0,Z:0},this._gamma=-2.2,this._colorSpace="sRGB",this._refWhiteName="D65",this._refWhiteNameUSER="",this._adtAlg="Bradford",this._doAdapta=!0,this._doAdaptaUSER=0,this._dLV=1,this._COLORSPACES={sRGB:"sRGB",AdobeRGB:"AdobeRGB",AppleRGB:"AppleRGB",BestRGB:"BestRGB",BetaRGB:"BetaRGB",BruceRGB:"BruceRGB",CIERGB:"CIERGB",ColorMatchRGB:"ColorMatchRGB",ECIRGBv2:"ECIRGBv2",DonRGB4:"DonRGB4",EktaSpacePS5:"EktaSpacePS5",NTSCRGB:"NTSCRGB",PALSECAMRGB:"PALSECAMRGB",ProPhotoRGB:"ProPhotoRGB",SMPTECRGB:"SMPTECRGB",WideGamutRGB:"WideGamutRGB"},this._REFWHITES={A:"A",B:"B",C:"C",D50:"D50",D55:"D55",D65:"D65",D75:"D75",E:"E",F2:"F2",F7:"F7",F11:"F11"},this._adt_refWhite={X:0,Y:0,Z:0},this._adt_refWhiteRGB={X:0,Y:0,Z:0},this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]],this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]],this._rgbX(arguments,this._COLORSPACES.sRGB)}function e(e){return e.prototype.__extensionInit=function(){function e(t){return t=+t,Number.isNaN(t)&&(t=0),t}function _(t,e,_){return t>_?_:t<e?e:t}this.ex={},this.ex.colorRNA=new t;var i=this;i.__ex_enable=!0,i.__pauseUpdate_ex_labPs=!1,i.__pauseUpdate_ex_lab=!1,i.__pauseUpdate_ex_LCHab=!1,i.__pauseUpdate_ex_hsl255=!1,i.__pauseUpdate_ex_hsl240=!1,i.__pauseUpdate_ex_xyz=!1,i.__pauseUpdate_ex_xyY=!1,i.__pauseUpdate_ex_luv=!1,i.ex.getWCAGcontrastThan=function(e){i.ex.colorRNA.rgb(i.r,i.g,i.b);var _=new t([e.r,e.g,e.b]);return i.ex.colorRNA.getWCAGcontrastThan(_).toFixed(1)},i.ex.labPs={_l:0,_a:0,_b:0},Object.defineProperty(i.ex.labPs,"l",{set:function(t){t=e(t),t=_(t,0,100);var h=i.ex.colorRNA.LabPS([t,i.ex.labPs.a,i.ex.labPs.b]).rgb();this._l=t,i.__pauseUpdate_ex_labPs=!0,i.set(h),i.__pauseUpdate_ex_labPs=!1},get:function(){return this._l}}),Object.defineProperty(i.ex.labPs,"a",{set:function(t){t=e(t),t=_(t,-128,127);var h=i.ex.colorRNA.LabPS([i.ex.labPs.l,t,i.ex.labPs.b]).rgb();this._a=t,i.__pauseUpdate_ex_labPs=!0,i.set(h),i.__pauseUpdate_ex_labPs=!1},get:function(){return this._a}}),Object.defineProperty(i.ex.labPs,"b",{set:function(t){t=e(t),t=_(t,-128,127);var h=i.ex.colorRNA.LabPS([i.ex.labPs.l,i.ex.labPs.a,t]).rgb();this._b=t,i.__pauseUpdate_ex_labPs=!0,i.set(h),i.__pauseUpdate_ex_labPs=!1},get:function(){return this._b}}),i.ex.lab={_l:0,_a:0,_b:0},Object.defineProperty(i.ex.lab,"l",{set:function(t){t=e(t),t=_(t,0,100);var h=i.ex.colorRNA.Lab([t,i.ex.lab.a,i.ex.lab.b]).rgb();this._l=t,i.__pauseUpdate_ex_lab=!0,i.set(h),i.__pauseUpdate_ex_lab=!1},get:function(){return this._l}}),Object.defineProperty(i.ex.lab,"a",{set:function(t){t=e(t),t=_(t,-128,127);var h=i.ex.colorRNA.Lab([i.ex.lab.l,t,i.ex.lab.b]).rgb();this._a=t,i.__pauseUpdate_ex_lab=!0,i.set(h),i.__pauseUpdate_ex_lab=!1},get:function(){return this._a}}),Object.defineProperty(i.ex.lab,"b",{set:function(t){t=e(t),t=_(t,-128,127);var h=i.ex.colorRNA.Lab([i.ex.lab.l,i.ex.lab.a,t]).rgb();this._b=t,i.__pauseUpdate_ex_lab=!0,i.set(h),i.__pauseUpdate_ex_lab=!1},get:function(){return this._b}}),i.ex.LCHab={_l:0,_c:0,_h:0},Object.defineProperty(i.ex.LCHab,"l",{set:function(t){t=e(t),t=_(t,0,100);var h=i.ex.colorRNA.LCHab([t,i.ex.LCHab.c,i.ex.LCHab.h]).rgb();this._l=t,i.__pauseUpdate_ex_LCHab=!0,i.set(h),i.__pauseUpdate_ex_LCHab=!1},get:function(){return this._l}}),Object.defineProperty(i.ex.LCHab,"c",{set:function(t){t=e(t),t=_(t,0,100);var h=i.ex.colorRNA.LCHab([i.ex.LCHab.l,t,i.ex.LCHab.h]).rgb();this._c=t,i.__pauseUpdate_ex_LCHab=!0,i.set(h),i.__pauseUpdate_ex_LCHab=!1},get:function(){return this._c}}),Object.defineProperty(i.ex.LCHab,"h",{set:function(t){t=e(t),t=_(t,0,360);var h=i.ex.colorRNA.LCHab([i.ex.LCHab.l,i.ex.LCHab.c,t]).rgb();this._h=t,i.__pauseUpdate_ex_LCHab=!0,i.set(h),i.__pauseUpdate_ex_LCHab=!1},get:function(){return this._h}}),i.ex.hsl255={_h:0,_s:0,_l:0},Object.defineProperty(i.ex.hsl255,"h",{set:function(t){t=e(t),t=_(t,0,255);var h=i.ex.colorRNA.HSL255([t,i.ex.hsl255.s,i.ex.hsl255.l]).rgb();this._h=t,i.__pauseUpdate_ex_hsl255=!0,i.set(h),i.__pauseUpdate_ex_hsl255=!1},get:function(){return this._h}}),Object.defineProperty(i.ex.hsl255,"s",{set:function(t){t=e(t),t=_(t,0,255);var h=i.ex.colorRNA.HSL255([i.ex.hsl255.h,t,i.ex.hsl255.l]).rgb();this._s=t,i.__pauseUpdate_ex_hsl255=!0,i.set(h),i.__pauseUpdate_ex_hsl255=!1},get:function(){return this._s}}),Object.defineProperty(i.ex.hsl255,"l",{set:function(t){t=e(t),t=_(t,0,255);var h=i.ex.colorRNA.HSL255([i.ex.hsl255.h,i.ex.hsl255.s,t]).rgb();this._l=t,i.__pauseUpdate_ex_hsl255=!0,i.set(h),i.__pauseUpdate_ex_hsl255=!1},get:function(){return this._l}}),i.ex.hsl240={_h:0,_s:0,_l:0},Object.defineProperty(i.ex.hsl240,"h",{set:function(t){t=e(t),t=_(t,0,239);var h=i.ex.colorRNA.HSL240([t,i.ex.hsl240.s,i.ex.hsl240.l]).rgb();this._h=t,i.__pauseUpdate_ex_hsl240=!0,i.set(h),i.__pauseUpdate_ex_hsl240=!1},get:function(){return this._h}}),Object.defineProperty(i.ex.hsl240,"s",{set:function(t){t=e(t),t=_(t,0,240);var h=i.ex.colorRNA.HSL240([i.ex.hsl240.h,t,i.ex.hsl240.l]).rgb();this._s=t,i.__pauseUpdate_ex_hsl240=!0,i.set(h),i.__pauseUpdate_ex_hsl240=!1},get:function(){return this._s}}),Object.defineProperty(i.ex.hsl240,"l",{set:function(t){t=e(t),t=_(t,0,240);var h=i.ex.colorRNA.HSL240([i.ex.hsl240.h,i.ex.hsl240.s,t]).rgb();this._l=t,i.__pauseUpdate_ex_hsl240=!0,i.set(h),i.__pauseUpdate_ex_hsl240=!1},get:function(){return this._l}}),i.ex.xyz={_x:0,_y:0,_z:0},Object.defineProperty(i.ex.xyz,"x",{set:function(t){t=e(t),t=_(t,0,3);var h=i.ex.colorRNA.XYZ([t,i.ex.xyz.y,i.ex.xyz.z]).rgb();this._x=t,i.__pauseUpdate_ex_xyz=!0,i.set(h),i.__pauseUpdate_ex_xyz=!1},get:function(){return this._x}}),Object.defineProperty(i.ex.xyz,"y",{set:function(t){t=e(t),t=_(t,0,3);var h=i.ex.colorRNA.XYZ([i.ex.xyz.x,t,i.ex.xyz.z]).rgb();this._y=t,i.__pauseUpdate_ex_xyz=!0,i.set(h),i.__pauseUpdate_ex_xyz=!1},get:function(){return this._y}}),Object.defineProperty(i.ex.xyz,"z",{set:function(t){t=e(t),t=_(t,0,2);var h=i.ex.colorRNA.XYZ([i.ex.xyz.x,i.ex.xyz.y,t]).rgb();this._z=t,i.__pauseUpdate_ex_xyz=!0,i.set(h),i.__pauseUpdate_ex_xyz=!1},get:function(){return this._z}}),i.ex.xyY={_x:0,_y:0,_Y:0},Object.defineProperty(i.ex.xyY,"x",{set:function(t){t=e(t),t=_(t,0,2);var h=i.ex.colorRNA.xyY([t,i.ex.xyY.y,i.ex.xyY.Y]).rgb();this._x=t,i.__pauseUpdate_ex_xyY=!0,i.set(h),i.__pauseUpdate_ex_xyY=!1},get:function(){return this._x}}),Object.defineProperty(i.ex.xyY,"y",{set:function(t){t=e(t),t=_(t,0,2);var h=i.ex.colorRNA.xyY([i.ex.xyY.x,t,i.ex.xyY.Y]).rgb();this._y=t,i.__pauseUpdate_ex_xyY=!0,i.set(h),i.__pauseUpdate_ex_xyY=!1},get:function(){return this._y}}),Object.defineProperty(i.ex.xyY,"Y",{set:function(t){t=e(t),t=_(t,0,1);var h=i.ex.colorRNA.xyY([i.ex.xyY.x,i.ex.xyY.y,t]).rgb();this._Y=t,i.__pauseUpdate_ex_xyY=!0,i.set(h),i.__pauseUpdate_ex_xyY=!1},get:function(){return this._Y}}),i.ex.luv={_l:0,_u:0,_v:0},Object.defineProperty(i.ex.luv,"l",{set:function(t){t=e(t),t=_(t,0,100);var h=i.ex.colorRNA.Luv([t,i.ex.luv.u,i.ex.luv.v]).rgb();this._l=t,i.__pauseUpdate_ex_luv=!0,i.set(h),i.__pauseUpdate_ex_luv=!1},get:function(){return this._l}}),Object.defineProperty(i.ex.luv,"u",{set:function(t){t=e(t),t=_(t,-200,200);var h=i.ex.colorRNA.Luv([i.ex.luv.l,t,i.ex.luv.v]).rgb();this._u=t,i.__pauseUpdate_ex_luv=!0,i.set(h),i.__pauseUpdate_ex_luv=!1},get:function(){return this._u}}),Object.defineProperty(i.ex.luv,"v",{set:function(t){t=e(t),t=_(t,-200,200);var h=i.ex.colorRNA.Luv([i.ex.luv.l,i.ex.luv.u,t]).rgb();this._v=t,i.__pauseUpdate_ex_luv=!0,i.set(h),i.__pauseUpdate_ex_luv=!1},get:function(){return this._v}}),i.ex._theWavelength=0,Object.defineProperty(i.ex,"theWavelength",{set:function(t){},get:function(){return this._theWavelength}}),i.ex._theLuma_Rec709=0,Object.defineProperty(i.ex,"theLuma_Rec709",{set:function(t){},get:function(){return this._theLuma_Rec709}}),i.ex._theLuma_WCAG=0,Object.defineProperty(i.ex,"theLuma_WCAG",{set:function(t){},get:function(){return this._theLuma_WCAG}})},e.prototype.__extensionSettingEvent=function(){if(this.__ex_enable){if(this.ex.colorRNA.rgb(this.r,this.g,this.b),1!=this.__pauseUpdate_ex_labPs){var t=this.ex.colorRNA.LabPS();this.ex.labPs._l=t[0],this.ex.labPs._a=t[1],this.ex.labPs._b=t[2]}if(1!=this.__pauseUpdate_ex_lab){var e=this.ex.colorRNA.Lab();this.ex.lab._l=e[0],this.ex.lab._a=e[1],this.ex.lab._b=e[2]}if(1!=this.__pauseUpdate_ex_LCHab){var _=this.ex.colorRNA.LCHab();this.ex.LCHab._l=_[0],this.ex.LCHab._c=_[1],this.ex.LCHab._h=_[2]}if(1!=this.__pauseUpdate_ex_hsl255){var i=this.ex.colorRNA.HSL255();this.ex.hsl255._h=i[0],this.ex.hsl255._s=i[1],this.ex.hsl255._l=i[2]}if(1!=this.__pauseUpdate_ex_hsl240){var h=this.ex.colorRNA.HSL240();this.ex.hsl240._h=h[0],this.ex.hsl240._s=h[1],this.ex.hsl240._l=h[2]}if(1!=this.__pauseUpdate_ex_xyz){var s=this.ex.colorRNA.XYZ();this.ex.xyz._x=s[0],this.ex.xyz._y=s[1],this.ex.xyz._z=s[2]}if(1!=this.__pauseUpdate_ex_xyY){var r=this.ex.colorRNA.xyY();this.ex.xyY._x=r[0],this.ex.xyY._y=r[1],this.ex.xyY._Y=r[2]}if(1!=this.__pauseUpdate_ex_luv){var a=this.ex.colorRNA.Luv();this.ex.luv._l=a[0],this.ex.luv._u=a[1],this.ex.luv._v=a[2]}this.ex._theLuma_Rec709=this.ex.colorRNA.getLuma("709").toFixed(3),this.ex._theLuma_WCAG=this.ex.colorRNA.getWCAGluma().toFixed(3),this.ex._theWavelength=this.ex.colorRNA.getWavelength().toFixed(1)}},e}var _=function(t){if("object"==typeof this&&this.__isIchiColor)var e=!0;else var e=!1;if(!e){var i=new _;return _.apply(i,arguments),i}return!1===this.__initialized&&(this.initSetterGetter(),void 0!=this.__extensionInit&&"function"==typeof this.__extensionInit&&this.__extensionInit(),this.__initialized=!0),this.set.apply(this,arguments),this};return _.prototype.__isIchiColor=!0,_.prototype.__initialized=!1,_.prototype.__pauseUpdate=!1,_.prototype.__pauseUpdate_Hsv=!1,_.prototype.__pauseUpdate_Hwb=!1,_.prototype._rgb=function(){return{r:this.r,g:this.g,b:this.b}},_.prototype._gethex=function(){var t=this.r.toString(16),e=this.g.toString(16),_=this.b.toString(16),i="#";return 1==t.length?i=i+"0"+t:i+=t,1==e.length?i=i+"0"+e:i+=e,1==_.length?i=i+"0"+_:i+=_,i},_.prototype.adjust_hueSaturation=function(t,e,_){var i=this._getHsv();return void 0!=t&&(i.h=i.h+t,i.h<0&&(i.h=360-i.h),i.h>360&&(i.h=i.h-360)),void 0!=e&&(i.s=i.s+e,i.s<0&&(i.s=0),i.s>100&&(i.s=100)),void 0!=_&&(i.v=i.v+_,i.v<0&&(i.v=0),i.v>100&&(i.v=100)),this._setFromHsv(i),this},_.prototype._getHsl=function(){var t,e,_,i,h,s,r,a,o,n=this._normalizArray([this._r,this._g,this._b],0,255,1);if(t=n[0],e=n[1],_=n[2],a=Math.max(t,e,_),o=Math.min(t,e,_),s=(a+o)/2,a===o)i=h=0;else{switch(r=a-o,h=s>.5?r/(2-a-o):r/(a+o),a){case t:i=(e-_)/r+(e<_?6:0);break;case e:i=(_-t)/r+2;break;case _:i=(t-e)/r+4}i/=6}return i*=360,h*=100,s*=100,i=Math.round(i),h=Math.round(h),s=Math.round(s),(i<0||h<0||h>100||s<0||s>100)&&console.error("rgb",n,{r:t,g:e,b:_,h:i,s:h,l:s,d:r,max:a,min:o},[this._r,this._g,this._b]),{h:i,s:h,l:s}},_.prototype._getHsv=function(){var t,e,i,h,s,r,a=_.prototype._normaliz(this.r,0,255,1),o=_.prototype._normaliz(this.g,0,255,1),n=_.prototype._normaliz(this.b,0,255,1);if(t=Math.max(a,o,n),e=Math.min(a,o,n),s=t,r=t-e,h=0===t?0:r/t,t===e)i=0;else{switch(t){case a:i=(o-n)/r+(o<n?6:0);break;case o:i=(n-a)/r+2;break;case n:i=(a-o)/r+4}i/=6}return i=Math.round(360*i),h=Math.round(100*h),s=Math.round(100*s),{h:i,s:h,v:s}},_.prototype._getHwb=function(){var t,e,i,h=_.prototype._RGB_to_HSV([this.r,this.g,this.b]);return t=h[0],e=Math.round((100-h[1])*h[2]/100),i=Math.round(100-h[2]),{h:t,w:e,b:i}},_.prototype._setFromRgba=function(t){var e=/[0-9\.]+/,_=t.split(",");if(_.length>=3){this.__pauseUpdate=!0;var i=e.exec(_[0]);i.length>0&&(this.r=Number.parseInt(i[0])),i=e.exec(_[1]),i.length>0&&(this.g=Number.parseInt(i[0])),i=e.exec(_[2]),i.length>0&&(this.b=Number.parseInt(i[0])),4==_.length&&(i=e.exec(_[3]),i.length>0&&i>=0&&i<=1&&(this.alpha=+i[0])),this.__pauseUpdate=!1,this.__undateValue()}},_.prototype._setFromHsv=function(t){var e,i,h,s,r,a,o,n,u=_.prototype._normaliz(t.s,0,100,1),p=_.prototype._normaliz(t.v,0,100,1),d=t.h/60;switch(360==t.h&&(d=0),s=Math.floor(d),r=d-s,a=p*(1-u),o=p*(1-u*r),n=p*(1-u*(1-r)),s){case 0:e=p,i=n,h=a;break;case 1:e=o,i=p,h=a;break;case 2:e=a,i=p,h=n;break;case 3:e=a,i=o,h=p;break;case 4:e=n,i=a,h=p;break;case 5:e=p,i=a,h=o}var f=_.prototype._normaOutRGB(_.prototype._normalizArray([e,i,h],0,1,255));return this.__pauseUpdate=!0,this.r=f[0],this.g=f[1],this.b=f[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsv=!0,this.__undateValue(),this.__pauseUpdate_Hsv=!1,this.__freshly_hsv=!0,this},_.prototype._setFromHwb=function(t){this.__freshly_hwb=!0;var e,i,h;if(e=t.h,360==e&&(e=0),100==t.b)var s=0;else var s=t.w/(100-t.b);i=100-100*s,h=100-t.b;var r=_.prototype._HSV_to_RGB([e,i,h]);return this.__pauseUpdate=!0,this.r=r[0],this.g=r[1],this.b=r[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hwb=!0,this.__undateValue(),this.__pauseUpdate_Hwb=!1,this.__freshly_hwb=!0,this},_.prototype._HSV_to_RGB=function(t){var e,i,h,s,r,a,o,n;if(0===p)return[0,0,0];var u=_.prototype._normaliz(t[1],0,100,1),p=_.prototype._normaliz(t[2],0,100,1),d=t[0]/60;switch(s=Math.floor(d),r=d-s,a=p*(1-u),o=p*(1-u*r),n=p*(1-u*(1-r)),s){case 0:e=p,i=n,h=a;break;case 1:e=o,i=p,h=a;break;case 2:e=a,i=p,h=n;break;case 3:e=a,i=o,h=p;break;case 4:e=n,i=a,h=p;break;case 5:e=p,i=a,h=o}return _.prototype._normaOutRGB(_.prototype._normalizArray([e,i,h],0,1,255))},_.prototype._RGB_to_HSV=function(t){var e,i,h,s,r,a,o=_.prototype._normaliz(t[0],0,255,1),n=_.prototype._normaliz(t[1],0,255,1),u=_.prototype._normaliz(t[2],0,255,1);if(e=Math.max(o,n,u),i=Math.min(o,n,u),r=e,a=e-i,s=0===e?0:a/e,e===i)h=0;else{switch(e){case o:h=(n-u)/a+(n<u?6:0);break;case n:h=(u-o)/a+2;break;case u:h=(o-n)/a+4}h/=6}return h=Math.round(360*h),s=Math.round(100*s),r=Math.round(100*r),[h,s,r]},_.prototype._setFromHsl=function(t){this.__freshly_hsl=!0;var e=t.h,i=_.prototype._normaliz(t.s,0,100,1),h=_.prototype._normaliz(t.l,0,100,1);if(360==e&&(e=0),void 0==e)return[0,0,0];var s=(1-Math.abs(2*h-1))*i,r=e/60,a=s*(1-Math.abs(r%2-1));r=Math.floor(r);var o,n,u;0===r?(o=s,n=a,u=0):1===r?(o=a,n=s,u=0):2===r?(o=0,n=s,u=a):3===r?(o=0,n=a,u=s):4===r?(o=a,n=0,u=s):5===r&&(o=s,n=0,u=a);var p=h-s/2;o+=p,n+=p,u+=p;var d=_.prototype._normaOutRGB(_.prototype._normalizArray([o,n,u],0,1,255));return this.__pauseUpdate=!0,this.r=d[0],this.g=d[1],this.b=d[2],this.__pauseUpdate=!1,this.__pauseUpdate_Hsl=!0,this.__undateValue(),this.__pauseUpdate_Hsl=!1,this.__freshly_hsl=!0,this},_.prototype._normalizArray=function(t,e,_,i){for(var h=0;h<t.length;h++)t[h]=this._normaliz(t[h],e,_,i);return t},_.prototype._normaliz=function(t,e,_,i){var h=0;return 4==arguments.length?(h=(t-e)/(_-e),h*=i):h=arguments[0]/255,h},_.prototype._normaOutRGB=function(t){var e=0;for(e=0;e<t.length;e++)t[e]=Math.round(t[e]),(t[e]<0||-0==t[e])&&(t[e]=0);return t},_.prototype.set=function(t){if(0==arguments.length)this.r=0,this.g=0,this.b=0,this.alpha=1;else if(1===arguments.length){var e;if(arguments[0].constructor===String)if("#"===arguments[0][0])if(4===arguments[0].length){var _=Number.parseInt(arguments[0].slice(1),16);this.r=_>>8&15|_>>4&240,this.g=_>>4&15|240&_,this.b=(15&_)<<4|15&_}else 7===arguments[0].length&&(arguments[0]=Number.parseInt(arguments[0].slice(1),16),e="number");else"r"===arguments[0][0]?this._setFromRgba(arguments[0]):arguments[0]==+arguments[0]&&(e="number",arguments[0]=+arguments[0]);arguments[0].constructor===Number||"number"==e?(this.r=arguments[0]>>16,this.g=arguments[0]>>8&255,this.b=255&arguments[0]):Array.isArray(arguments[0])?3==arguments[0].length&&(this.r=arguments[0][0],this.g=arguments[0][1],this.b=arguments[0][2]):arguments[0].constructor===Object&&(void 0!=arguments[0].h?void 0!=arguments[0].v?(this.hsv._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsv._s=arguments[0].s),this.hsv._v=arguments[0].v,this._setFromHsv({h:this.hsv._h,s:this.hsv._s,v:this.hsv._v})):void 0!=arguments[0].l?(this.hsl._h=arguments[0].h,void 0!=arguments[0].s&&(this.hsl._s=arguments[0].s),this.hsl._l=arguments[0].l,this._setFromHsl({h:this.hsl._h,s:this.hsl._s,l:this.hsl._l})):void 0!=arguments[0].w&&(this.hwb._h=arguments[0].h,void 0!=arguments[0].w&&(this.hwb._w=arguments[0].w),void 0!=arguments[0].b&&(x,this.hwb._b=arguments[0].b),this._setFromHwb({h:this.hwb._h,w:this.hwb._w,b:this.hwb._b})):(void 0!=arguments[0].r?this.r=arguments[0].r:void 0!=arguments[0].red&&(this.r=arguments[0].red),void 0!=arguments[0].g?this.g=arguments[0].g:void 0!=arguments[0].green?this.g=arguments[0].green:void 0!=arguments[0].grain&&(this.g=arguments[0].grain),void 0!=arguments[0].b?this.b=arguments[0].b:void 0!=arguments[0].blue&&(this.b=arguments[0].blue),void 0!=arguments[0].a?this.alpha=arguments[0].a:void 0!=arguments[0].alpha&&(this.alpha=arguments[0].alpha)))}else arguments.length;return this},_.prototype.initSetterGetter=function(){this._alpha=1,this._rgba="rgba(0, 0, 0, 1)",this._rgb="rgba(0, 0, 0)",this._r=0,this._r_intPart=0,this._r_hexChar="00",this._g=0,this._g_intPart=0,this._g_hexChar="00",this._b=0,this._b_intPart=0,this._b_hexChar="00",this._rgbInt=0,this._rgbHex="#000000",Object.defineProperty(this,"r",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._r=t,this._r_intPart=t<<16;var e=t.toString(16);1==e.length&&(e="0"+e),this._r_hexChar=e,this.__undateValue()},get:function(){return this._r}}),Object.defineProperty(this,"g",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._g=t,this._g_intPart=t<<8;var e=t.toString(16);1==e.length&&(e="0"+e),this._g_hexChar=e,this.__undateValue()},get:function(){return this._g}}),Object.defineProperty(this,"b",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,255),this._b=t,this._b_intPart=t;var e=t.toString(16);1==e.length&&(e="0"+e),this._b_hexChar=e,this.__undateValue()},get:function(){return this._b}}),Object.defineProperty(this,"int",{set:function(t){t=Number.parseInt(t),t=this.__colorValueRange(t,0,16777215),this.__pauseUpdate=!0,this.r=t>>16,this.g=t>>8&255,this.b=255&t,this.__pauseUpdate=!1,this.__undateValue()},get:function(){return this._rgbInt}}),Object.defineProperty(this,"hex",{set:function(t){if("#"===t[0])if(4===t.length){var e=Number.parseInt(t.slice(1),16);this.__pauseUpdate=!0,this.r=e>>8&15|e>>4&240,this.g=e>>4&15|240&e,this.b=(15&e)<<4|15&e,this.__pauseUpdate=!1,this.__undateValue()}else 7===t.length&&(t=Number.parseInt(arguments[0].slice(1),16),this.int=t)},get:function(){return this._rgbHex}}),this.__use_rgb=!1,this.__freshly_rgb=!1,Object.defineProperty(this,"rgb",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgb&&(this.__use_rgb=!0),1!=this.__freshly_rgb&&this.__undatePart_Rgb(),this._rgb}}),this.__use_rgba=!1,this.__freshly_rgba=!1,Object.defineProperty(this,"rgba",{set:function(t){this._setFromRgba(t)},get:function(){return 1!=this.__use_rgba&&(this.__use_rgba=!0),1!=this.__freshly_rgba&&this.__undatePart_Rgba(),this._rgba}}),Object.defineProperty(this,"alpha",{set:function(t){t=+t,t=this.__colorValueRange(t,0,1),this._alpha=t,this.__undatePart_Rgba()},get:function(){return this._alpha}}),this.__use_hsv=!1,this.__freshly_hsv=!1,this.hsv={_h:0,_s:0,_v:0},Object.defineProperty(this.hsv,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsv,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._h}}),Object.defineProperty(this.hsv,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._s}}),Object.defineProperty(this.hsv,"v",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._v=t,this.__obSelf._setFromHsv({h:this._h,s:this._s,v:this._v})},get:function(){return 1!=this.__obSelf.__use_hsv&&(this.__obSelf.__use_hsv=!0),1!=this.__obSelf.__freshly_hsv&&this.__obSelf.__undatePart_Hsv(),this._v}}),this.__use_hsl=!1,this.__freshly_hsl=!1,this.hsl={_h:0,_s:0,_l:0},Object.defineProperty(this.hsl,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hsl,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._h}}),Object.defineProperty(this.hsl,"s",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._s=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._s}}),Object.defineProperty(this.hsl,"l",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._l=t,this.__obSelf._setFromHsl({h:this._h,s:this._s,l:this._l})},get:function(){return 1!=this.__obSelf.__use_hsl&&(this.__obSelf.__use_hsl=!0),1!=this.__obSelf.__freshly_hsl&&this.__obSelf.__undatePart_Hsl(),this._l}}),this.__use_hwb=!1,this.__freshly_hwb=!1,this.hwb={_h:0,_w:0,_b:0},Object.defineProperty(this.hwb,"__obSelf",{value:this,enumerable:!1}),Object.defineProperty(this.hwb,"h",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,360),this._h=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._h}}),Object.defineProperty(this.hwb,"w",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._w=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._w}}),Object.defineProperty(this.hwb,"b",{set:function(t){t=Number.parseInt(t),t=this.__obSelf.__colorValueRange(t,0,100),this._b=t,this.__obSelf._setFromHwb({h:this._h,w:this._w,b:this._b})},get:function(){return 1!=this.__obSelf.__use_hwb&&(this.__obSelf.__use_hwb=!0),1!=this.__obSelf.__freshly_hwb&&this.__obSelf.__undatePart_Hwb(),this._b}})},_.prototype.__undateValue=function(){this.__pauseUpdate||(this._rgbInt=this._r_intPart+this._g_intPart+this._b_intPart,this._rgbHex="#"+this._r_hexChar+this._g_hexChar+this._b_hexChar,this.__freshly_hsl=!1,this.__freshly_hsv=!1,this.__freshly_hwb=!1,this.__freshly_rgb=!1,this.__freshly_rgba=!1,this.__use_hsv&&1!=this.__pauseUpdate_Hsv&&this.__undatePart_Hsv(),this.__use_hsl&&1!=this.__pauseUpdate_Hsl&&this.__undatePart_Hsl(),this.__use_hwb&&1!=this.__pauseUpdate_Hwb&&this.__undatePart_Hwb(),this.__use_rgba&&this.__undatePart_Rgba(),void 0!=this.__extensionSettingEvent&&this.__extensionSettingEvent())},_.prototype.__undatePart_Hsv=function(){var t=this._getHsv();this.hsv._h=t.h,this.hsv._s=t.s,this.hsv._v=t.v,this.__freshly_hsv=!0},_.prototype.__undatePart_Hsl=function(){var t=this._getHsl();this.hsl._h=t.h,this.hsl._s=t.s,this.hsl._l=t.l,this.__freshly_hsl=!0},_.prototype.__undatePart_Hwb=function(){var t=this._getHwb();this.hwb._h=t.h,this.hwb._w=t.w,this.hwb._b=t.b,this.__freshly_hwb=!0},_.prototype.__undatePart_Rgba=function(){this._rgba="rgba("+this._r+", "+this._g+", "+this._b+", "+this.alpha+")",this.__freshly_rgba=!0},_.prototype.__undatePart_Rgb=function(){this._rgb="rgb("+this._r+", "+this._g+", "+this._b+")",this.__freshly_rgb=!0},_.prototype.__colorValueRange=function(t,e,_){return t>_?_:t<e?e:t},_.prototype.getRGB=function(){return{r:this.r,g:this.g,b:this.b}},_.prototype.getHSL=function(){return{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l}},_.prototype.getHSV=function(){return{h:this.hsv.h,s:this.hsv.s,v:this.hsv.v}},_.prototype.getHWB=function(){return{h:this.hwb.h,w:this.hwb.w,b:this.hwb.b}},_.prototype.getRedGreenBlue=function(){return{red:this.r,green:this.g,blue:this.b}},_.prototype.getRedGrainBlue=function(){return{red:this.r,grain:this.g,blue:this.b}},_.prototype.getClone=function(){return new _({r:this.r,g:this.g,b:this.b})},_.prototype.getInvertColor=function(){return new _({r:255-this.r,g:255-this.g,b:255-this.b})},t.prototype._RGBstring=function(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)},t.prototype._arrayProduct=function(t,e){for(var _=0,i=0;i<t.length;i++)_+=t[i]*e[i];return _},t.prototype._normaliz=function(t,e,_,i){var h=0;return 4==arguments.length?(h=(t-e)/(_-e),h*=i):h=arguments[0]/255,h},t.prototype._normalizArray=function(t,e,_,i){for(var h=0;h<t.length;h++)t[h]=this._normaliz(t[h],e,_,i);return t},t.prototype._arrayFixed=function(t,e){for(var _=0;_<t.length;_++)t[_]=+t[_].toFixed(e)},t.prototype._arrayRound=function(t){for(var e=0;e<t.length;e++)t[e]=Math.round(t[e])},t.prototype._enGamma=function(t){var e=0,_=1;return t<0&&(_=-1,t=-t),this._gamma<0&&(e=t<=.0031306684425005883?_*t*12.92:1.055*_*Math.pow(t,.4166666666666667)-.055),0==this._gamma&&(e=t<=216/24389?_*(24389*t/2700):_*(1.16*Math.pow(t,1/3)-.16)),this._gamma>0&&(e=_*Math.pow(t,1/this._gamma)),e},t.prototype._adt_adaptation=function(t,e){this._adt_setRefWhite(t),this._adt_setAdaptMa(e);var _=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0],i=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1],h=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2],s=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0],r=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1],a=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2],o=this._xyz.X*this._adt_mtxAdaptMa[0][0]+this._xyz.Y*this._adt_mtxAdaptMa[1][0]+this._xyz.Z*this._adt_mtxAdaptMa[2][0],n=this._xyz.X*this._adt_mtxAdaptMa[0][1]+this._xyz.Y*this._adt_mtxAdaptMa[1][1]+this._xyz.Z*this._adt_mtxAdaptMa[2][1],u=this._xyz.X*this._adt_mtxAdaptMa[0][2]+this._xyz.Y*this._adt_mtxAdaptMa[1][2]+this._xyz.Z*this._adt_mtxAdaptMa[2][2];return o*=_/s,n*=i/r,u*=h/a,[o*this._adt_mtxAdaptMaI[0][0]+n*this._adt_mtxAdaptMaI[1][0]+u*this._adt_mtxAdaptMaI[2][0],o*this._adt_mtxAdaptMaI[0][1]+n*this._adt_mtxAdaptMaI[1][1]+u*this._adt_mtxAdaptMaI[2][1],o*this._adt_mtxAdaptMaI[0][2]+n*this._adt_mtxAdaptMaI[1][2]+u*this._adt_mtxAdaptMaI[2][2]]},t.prototype._adt_invAdaptation=function(t,e,_){this._adt_setRefWhite(e),this._adt_setAdaptMa(_);var i=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0],h=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1],s=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2],r=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0],a=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1],o=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2],n=t[0]*this._adt_mtxAdaptMa[0][0]+t[1]*this._adt_mtxAdaptMa[1][0]+t[2]*this._adt_mtxAdaptMa[2][0],u=t[0]*this._adt_mtxAdaptMa[0][1]+t[1]*this._adt_mtxAdaptMa[1][1]+t[2]*this._adt_mtxAdaptMa[2][1],p=t[0]*this._adt_mtxAdaptMa[0][2]+t[1]*this._adt_mtxAdaptMa[1][2]+t[2]*this._adt_mtxAdaptMa[2][2];return n*=r/i,u*=a/h,p*=o/s,[n*this._adt_mtxAdaptMaI[0][0]+u*this._adt_mtxAdaptMaI[1][0]+p*this._adt_mtxAdaptMaI[2][0],n*this._adt_mtxAdaptMaI[0][1]+u*this._adt_mtxAdaptMaI[1][1]+p*this._adt_mtxAdaptMaI[2][1],n*this._adt_mtxAdaptMaI[0][2]+u*this._adt_mtxAdaptMaI[1][2]+p*this._adt_mtxAdaptMaI[2][2]]},t.prototype._adt_setRefWhite=function(t){switch(this._refWhiteNameUSER.length>0&&(t=this._refWhiteNameUSER),this._adt_refWhite.Y=1,t){case"A":this._adt_refWhite.X=1.0985,this._adt_refWhite.Z=.35585;break;case"B":this._adt_refWhite.X=.99072,this._adt_refWhite.Z=.85223;break;case"C":this._adt_refWhite.X=.98074,this._adt_refWhite.Z=1.18232;break;case"D50":this._adt_refWhite.X=.96422,this._adt_refWhite.Z=.82521;break;case"D55":this._adt_refWhite.X=.95682,this._adt_refWhite.Z=.92149;break;case"D65":this._adt_refWhite.X=.95047,this._adt_refWhite.Z=1.08883;break;case"D75":this._adt_refWhite.X=.94972,this._adt_refWhite.Z=1.22638;break;case"E":this._adt_refWhite.X=1,this._adt_refWhite.Z=1;break;case"F2":this._adt_refWhite.X=.99186,this._adt_refWhite.Z=.67393;break;case"F7":this._adt_refWhite.X=.95041,this._adt_refWhite.Z=1.08747;break;case"F11":this._adt_refWhite.X=1.00962,this._adt_refWhite.Z=.6435}},t.prototype._adt_setAdaptMa=function(t){switch(t){case"Bradford":this._adt_mtxAdaptMa=[[.8951,-.7502,.0389],[.2664,1.7135,-.0685],[-.1614,.0367,1.0296]],this._adt_mtxAdaptMaI=[[.9869929054667123,.43230526972339456,-.008528664575177328],[-.14705425642099013,.5183602715367776,.04004282165408487],[.15996265166373125,.0492912282128556,.9684866957875502]];break;case"vonKries":this._adt_mtxAdaptMa=[[.40024,-.2263,0],[.7076,1.16532,0],[-.08081,.0457,.91822]],this._adt_mtxAdaptMaI=[[1.8599363874558397,.3611914362417676,-0],[-1.1293816185800916,.6388124632850422,-0],[.21989740959619328,-6370596838650885e-21,1.0890636230968613]];break;case"none":this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]],this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]]}},t.prototype._deGamma=function(t){var e=0,_=1;return t<0&&(_=-1,t=-t),this._gamma<0&&(e=t<=.0404482362771076?_*t/12.92:_*Math.pow((t+.055)/1.055,2.4)),0==this._gamma&&(e=t<=.08?2700*_*t/24389:_*((((1e6*t+48e4)*t+76800)*t+4096)/1560896)),this._gamma>0&&(e=_*Math.pow(t,this._gamma)),e},t.prototype._getRGBnucleotids=function(t,e){switch(this._adt_refWhiteRGB.Y=1,this._refWhiteName="D65",this._doAdapta=!0,t){case"sRGB":return this._gamma=-2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==e?2==this._dLV?[[3.2404541621141045,-1.5371385127977166,-.498531409556016],[-.9692660305051868,1.8760108454466942,.041556017530349834],[.055643430959114726,-.2040259135167538,1.0572251882231791]]:[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]]:2==this._dLV?[[.4124564390896922,.357576077643909,.18043748326639894],[.21267285140562253,.715152155287818,.07217499330655958],[.0193338955823293,.11919202588130297,.9503040785363679]]:[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]];case"AdobeRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,
1==e?2==this._dLV?[[2.041368979260079,-.5649463871751954,-.3446943843778483],[-.9692660305051861,1.876010845446693,.041556017530349786],[.013447387216170255,-.11838974235412553,1.0154095719504164]]:[[2.041369,-.5649464,-.3446944],[-.969266,1.8760108,.041556],[.0134474,-.1183897,1.0154096]]:2==this._dLV?[[.5767308871981477,.18555395071121408,.18818516209063843],[.29737686371154487,.6273490714522,.07527406483625537],[.027034260337413143,.0706872193185578,.9911085203440292]]:[[.5767309,.185554,.1881852],[.2973769,.6273491,.0752741],[.0270343,.0706872,.9911085]];case"AppleRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==e?2==this._dLV?[[2.951537290948746,-1.2894115658994107,-.473844478043996],[-1.0851093382231771,1.9908566080903682,.037202561107440836],[.08549335448914223,-.26949635273220945,1.0912975249496382]]:[[2.9515373,-1.2894116,-.4738445],[-1.0851093,1.9908566,.0372026],[.0854934,-.2694964,1.0912975]]:2==this._dLV?[[.4497288365610329,.31624860938967136,.1844925540492957],[.24465248708920193,.6720282949530516,.08331921795774647],[.025184814847417827,.14118241490610328,.9224627702464786]]:[[.4497288,.3162486,.1844926],[.2446525,.6720283,.0833192],[.0251848,.1411824,.9224628]];case"BestRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.7552599329466554,-.4836785613998958,-.25300004986116026],[-.5441336296844771,1.5068789209543363,.021552825898898505],[.00634673971374007,-.01757613896601896,1.225695866021057]]:[[1.7552599,-.4836786,-.253],[-.5441336,1.5068789,.0215528],[.0063467,-.0175761,1.2256959]]:2==this._dLV?[[.6326696499956765,.20455579792131387,.12699455208300955],[.22845686422193134,.7373522948326431,.034190840945425655],[0,.009514223159130886,.8156957768408691]]:[[.6326696,.2045558,.1269946],[.2284569,.7373523,.0341908],[0,.0095142,.8156958]];case"BetaRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.6832269542614402,-.4282362832078967,-.2360184809079736],[-.7710228944287557,1.7065571005222588,.04468995133824896],[.04000128943944507,-.08853755837368198,1.272364022576533]]:[[1.683227,-.4282363,-.2360185],[-.7710229,1.7065571,.04469],[.0400013,-.0885376,1.272364]]:2==this._dLV?[[.671253700292543,.17458338980154234,.11838290990591456],[.30327257771637545,.6637860908315439,.03294133145208057],[5.409707559738789e-17,.040700961469342455,.7845090385306573]]:[[.6712537,.1745834,.1183829],[.3032726,.6637861,.0329413],[0,.040701,.784509]];case"BruceRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==e?2==this._dLV?[[2.745466866559799,-1.1358136045241505,-.4350268528006593],[-.9692660305051869,1.8760108454466942,.04155601753034985],[.011272295190850611,-.1139754291519338,1.0132540899331266]]:[[2.7454669,-1.1358136,-.4350269],[-.969266,1.8760108,.041556],[.0112723,-.1139754,1.0132541]]:2==this._dLV?[[.4674161637795275,.2944512299212599,.18860260629921258],[.24101145944881885,.6835474980314961,.07544104251968503],[.021910132677165326,.0736128074803149,.9933070598425197]]:[[.4674162,.2944512,.1886026],[.2410115,.6835475,.075441],[.0219101,.0736128,.9933071]];case"CIERGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=1,this._adt_refWhiteRGB.Z=1,1==e?2==this._dLV?[[2.370674329102138,-.9000405327854051,-.4706337963167336],[-.513884966581945,1.42530358655747,.08858138002447524],[.005298175073030407,-.0146949384101032,1.0093967633370728]]:[[2.3706743,-.9000405,-.4706338],[-.513885,1.4253036,.0885814],[.0052982,-.0146949,1.0093968]]:2==this._dLV?[[.48871796548117163,.31068034326701394,.20060169125181454],[.1762044365340279,.8129846938775509,.010810869588421142],[0,.010204828793442072,.9897951712065579]]:[[.488718,.3106803,.2006017],[.1762044,.8129847,.0108109],[0,.0102048,.9897952]];case"ColorMatchRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[2.6422874096694384,-1.2234270341709754,-.39301430179044206],[-1.1119762771300263,2.059018273920192,.01596138196837363],[.08216985846755141,-.2807254155216341,1.4559876814266082]]:[[2.6422874,-1.223427,-.3930143],[-1.1119763,2.0590183,.0159614],[.0821699,-.2807254,1.4559877]]:2==this._dLV?[[.509343853397384,.3209070884940387,.13396905810857737],[.2748839843731914,.6581314865725201,.06698452905428869],[.024254469209399214,.1087820638962844,.6921734668943165]]:[[.5093439,.3209071,.1339691],[.274884,.6581315,.0669845],[.0242545,.1087821,.6921735]];case"ECIRGBv2":return this._gamma=0,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.7827617697270912,-.49698473887532724,-.2690100880150854],[-.9593623286322266,1.9477962429805813,-.027580735166583017],[.08593169513496947,-.17446738103160447,1.322827306926194]]:[[1.7827618,-.4969847,-.2690101],[-.9593623,1.9477962,-.0275807],[.0859317,-.1744674,1.3228273]]:2==this._dLV?[[.650204257079646,.1780773570796461,.13593838584070797],[.32024985796460176,.6020710644121368,.07767907762326169],[-5.3871025143217717e-17,.06783899317319857,.7573710068268015]]:[[.6502043,.1780774,.1359384],[.3202499,.6020711,.0776791],[-0,.067839,.757371]];case"DonRGB4":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.7603902333031187,-.48811980100639313,-.25361261951399006],[-.7126287844544976,1.6527431594729967,.041671534607820124],[.00782073858032594,-.03474110403369325,1.244774289550262]]:[[1.7603902,-.4881198,-.2536126],[-.7126288,1.6527432,.0416715],[.0078207,-.0347411,1.2447743]]:2==this._dLV?[[.645771138436728,.19335110357732524,.12509775798594666],[.2783496286365207,.6879702057518782,.033680165611601025],[.0037113283818203304,.01798614916998376,.8035125224481958]]:[[.6457711,.1933511,.1250978],[.2783496,.6879702,.0336802],[.0037113,.0179861,.8035125]];case"EktaSpacePS5":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[2.0043819420638203,-.7304844248729281,-.24500518813859393],[-.7110285484718862,1.6202125940588885,.07922268628430854],[.038126311068521795,-.0868779875167958,1.2725437595985338]]:[[2.0043819,-.7304844,-.2450052],[-.7110285,1.6202126,.0792227],[.0381263,-.086878,1.2725438]]:2==this._dLV?[[.5938913615570769,.2729801227546152,.09734851568830809],[.26062858312936465,.7349464843393485,.004424932531286731],[4.743538587961513e-17,.04199694196224853,.7832130580377514]]:[[.5938914,.2729801,.0973485],[.2606286,.7349465,.0044249],[0,.0419969,.7832131]];case"NTSCRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.98074,this._adt_refWhiteRGB.Z=1.18232,1==e?2==this._dLV?[[1.9099960989184541,-.5324541554529706,-.2882091300158282],[-.9846663050051847,1.9991709828893145,-.02830819991079395],[.0583056402155416,-.11837811801337218,.8975534918028807]]:[[1.9099961,-.5324542,-.2882091],[-.9846663,1.999171,-.0283082],[.0583056,-.1183781,.8975535]]:2==this._dLV?[[.6068909212389378,.1735011212389381,.20034795752212392],[.2989164238938052,.5865990289506955,.11448454715549937],[-5.028240852204785e-17,.06609566523388125,1.116224334766119]]:[[.6068909,.1735011,.200348],[.2989164,.586599,.1144845],[-0,.0660957,1.1162243]];case"PALSECAMRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==e?2==this._dLV?[[3.0628971232226965,-1.393179136493678,-.4757516712579541],[-.9692660305051867,1.876010845446694,.04155601753034983],[.06787750995175175,-.22885477399033227,1.0693489682562851]]:[[3.0628971,-1.3931791,-.4757517],[-.969266,1.8760108,.041556],[.0678775,-.2288548,1.069349]]:2==this._dLV?[[.4306190335097004,.3415419122574957,.17830905423280421],[.22203793915343925,.7066384391534394,.07132362169312169],[.020185267195767184,.12955038051146386,.9390943522927689]]:[[.430619,.3415419,.1783091],[.2220379,.7066384,.0713236],[.0201853,.1295504,.9390944]];case"ProPhotoRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.3459433009386654,-.25560750931676696,-.05111176587088495],[-.544598869458717,1.508167317720767,.020535141586646915],[0,-0,1.2118127506937628]]:[[1.3459433,-.2556075,-.0511118],[-.5445989,1.5081673,.0205351],[0,0,1.2118128]]:2==this._dLV?[[.7976749444306044,.13519170147409815,.031353354095297416],[.2880402378623102,.7118740972357901,8566490189971971e-20],[0,0,.82521]]:[[.7976749,.1351917,.0313534],[.2880402,.7118741,857e-7],[0,0,.82521]];case"SMPTECRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==e?2==this._dLV?[[3.505395974670056,-1.7394893606633242,-.543964026874098],[-1.0690722072799321,1.9778244814100043,.035172230231857005],[.056320014767146896,-.1970226122130985,1.0502026283050325]]:[[3.505396,-1.7394894,-.543964],[-1.0690722,1.9778245,.0351722],[.05632,-.1970226,1.0502026]]:2==this._dLV?[[.3935890809541021,.365249655704132,.19163126334176603],[.21241315480062656,.7010436940127694,.08654315118660402],[.018742337188290558,.11193134610287912,.9581563167088301]]:[[.3935891,.3652497,.1916313],[.2124132,.7010437,.0865432],[.0187423,.1119313,.9581563]];case"WideGamutRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==e?2==this._dLV?[[1.4628067131216802,-.18406234137547003,-.27436064462466103],[-.5217933153765428,1.447238063402864,.06772274590650387],[.034934211112166366,-.09689300063185764,1.2884099024409357]]:[[1.4628067,-.1840623,-.2743606],[-.5217933,1.4472381,.0677227],[.0349342,-.096893,1.2884099]]:2==this._dLV?[[.7161045686144476,.10092960102210317,.1471858303634494],[.25818736147323623,.7249378299500627,.016874808576701202],[0,.05178127356786167,.7734287264321384]]:[[.7161046,.1009296,.1471858],[.2581874,.7249378,.0168748],[0,.0517813,.7734287]]}},t.prototype._RGB_to_YPbPr=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],-.1687367*t[0]-.331264*t[1]+.5*t[2],.5*t[0]-.418688*t[1]-.081312*t[2]]},t.prototype._YPbPr_to_RGB_=function(t){var e=.9999999999991468*t[0]-12188941887145875e-22*t[1]+1.401999588656144*t[2],_=.9999997591050251*t[0]-.34413567816504304*t[1]-.7141364933164679*t[2],i=1.0000012404000462*t[0]+1.772000066072304*t[1]+21453384174593273e-22*t[2];return this._normalizArray([e,_,i],0,1,255)},t.prototype._RGB_to_YCbCr=function(t){return t=this._normalizArray(t,0,255,1),[65.481*t[0]+128.553*t[1]+24.966*t[2]+16,-37.797*t[0]-74.203*t[1]+112*t[2]+128,112*t[0]-93.786*t[1]-18.214*t[2]+128]},t.prototype._YCbCr_to_RGB=function(t){t[0]-=16,t[1]-=128,t[2]-=128;var e=.004566210045662101*t[0]+1.1808799897946416e-9*t[1]+.006258928969943936*t[2],_=.004566210045662101*t[0]-.0015363236860449021*t[1]-.003188110949655707*t[2],i=.004566210045662101*t[0]+.007910716233554741*t[1]+1.1977497040190077e-8*t[2];return this._normalizArray([e,_,i],0,1,255)},t.prototype._RGB_to_JpegYCbCr=function(t){var e=this._RGB_to_YPbPr(t);return[e[0],e[1]+.5,e[2]+.5]},t.prototype._JpegYCbCr_to_RGB=function(t){return this._YPbPr_to_RGB_([t[0],t[1]-.5,t[2]-.5])},t.prototype._RGB_to_YIQ=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],.595716*t[0]-.274453*t[1]-.321263*t[2],.211456*t[0]-.522591*t[1]+.311135*t[2]]},t.prototype._YIQ_to_RGB=function(t){var e=t[0]+.9562957197589482*t[1]+.6210244164652611*t[2],_=t[0]-.27212209931851045*t[1]-.647380596825695*t[2],i=t[0]-1.1069890167364902*t[1]+1.7046149983646481*t[2];return this._normalizArray([e,_,i],0,1,255)},t.prototype._RGB_to_YUV=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],-.147*t[0]-.289*t[1]+.436*t[2],.615*t[0]-.515*t[1]-.1*t[2]]},t.prototype._YUV_to_RGB=function(t){var e=t[0]-3945707070708279e-20*t[1]+1.139827967171717*t[2],_=t[0]-.39461016414141414*t[1]-.5805003156565657*t[2],i=t[0]+2.0319996843434343*t[1]-.0004813762626262513*t[2];return this._normalizArray([e,_,i],0,1,255)},t.prototype._RGB_to_HSL=function(t,e){t=this._normalizArray(t,0,255,1);var _,i,h,s,r,a,o,n,u;if(_=t[0],i=t[1],h=t[2],n=Math.max(_,i,h),u=Math.min(_,i,h),a=(n+u)/2,n===u)s=r=0;else{switch(o=n-u,r=a>.5?o/(2-n-u):o/(n+u),n){case _:s=(i-h)/o+(i<h?6:0);break;case i:s=(h-_)/o+2;break;case h:s=(_-i)/o+4}s/=6}return s*=360,r*=100,a*=100,1!=e&&(s=Math.round(s),r=Math.round(r),a=Math.round(a)),[s,r,a]},t.prototype._HSL_to_RGB=function(t){var e=t[0],_=this._normaliz(t[1],0,100,1),i=this._normaliz(t[2],0,100,1);if(360==e&&(e=0),void 0==e)return[0,0,0];var h=(1-Math.abs(2*i-1))*_,s=e/60,r=h*(1-Math.abs(s%2-1));s=Math.floor(s);var a,o,n;0===s?(a=h,o=r,n=0):1===s?(a=r,o=h,n=0):2===s?(a=0,o=h,n=r):3===s?(a=0,o=r,n=h):4===s?(a=r,o=0,n=h):5===s&&(a=h,o=0,n=r);var u=i-h/2;return a+=u,o+=u,n+=u,this._normaOutRGB(this._normalizArray([a,o,n],0,1,255))},t.prototype._RGB_to_HSL_255=function(t){var e=this._RGB_to_HSL(t,!0);return e[0]=Math.round(this._normaliz(e[0],0,360,255)),e[1]=Math.round(this._normaliz(e[1],0,100,255)),e[2]=Math.round(this._normaliz(e[2],0,100,255)),e},t.prototype._HSL_to_RGB_255=function(t){var e=[0,0,0];return e[0]=Math.round(this._normaliz(t[0],0,255,360)),e[1]=Math.round(this._normaliz(t[1],0,255,100)),e[2]=Math.round(this._normaliz(t[2],0,255,100)),this._HSL_to_RGB(e)},t.prototype._RGB_to_HSL_win239=function(t){var e=this._RGB_to_HSL(t,!0);return e[0]=Math.round(this._normaliz(e[0],0,360,239)),e[1]=Math.round(this._normaliz(e[1],0,100,240)),e[2]=Math.round(this._normaliz(e[2],0,100,240)),e},t.prototype._HSL_to_RGB_win240=function(t){var e=[0,0,0];return e[0]=Math.round(this._normaliz(t[0],0,239,360)),e[1]=Math.round(this._normaliz(t[1],0,240,100)),e[2]=Math.round(this._normaliz(t[2],0,240,100)),this._HSL_to_RGB(e)},t.prototype._RGB_to_HSV=function(t){var e,_,i,h,s,r,a=this._normaliz(t[0],0,255,1),o=this._normaliz(t[1],0,255,1),n=this._normaliz(t[2],0,255,1);if(e=Math.max(a,o,n),_=Math.min(a,o,n),s=e,r=e-_,h=0===e?0:r/e,e===_)i=0;else{switch(e){case a:i=(o-n)/r+(o<n?6:0);break;case o:i=(n-a)/r+2;break;case n:i=(a-o)/r+4}i/=6}return i=Math.round(360*i),h=Math.round(100*h),s=Math.round(100*s),[i,h,s]},t.prototype._HSV_to_RGB=function(t){var e,_,i,h,s,r,a,o;if(0===u)return[0,0,0];var n=this._normaliz(t[1],0,100,1),u=this._normaliz(t[2],0,100,1),p=t[0]/60;switch(h=Math.floor(p),s=p-h,r=u*(1-n),a=u*(1-n*s),o=u*(1-n*(1-s)),h){case 0:e=u,_=o,i=r;break;case 1:e=a,_=u,i=r;break;case 2:e=r,_=u,i=o;break;case 3:e=r,_=a,i=u;break;case 4:e=o,_=r,i=u;break;case 5:e=u,_=r,i=a}return this._normaOutRGB(this._normalizArray([e,_,i],0,1,255))},t.prototype._RGB_to_HWB=function(t){var e,_,i,h=this._RGB_to_HSV(t);return e=h[0],_=Math.round((100-h[1])*h[2]/100),i=Math.round(100-h[2]),[e,_,i]},t.prototype._HWB_to_RGB=function(t){var e,_,i;return e=t[0],_=100-t[1]/(100-t[2])*100,i=100-t[2],this._HSV_to_RGB([e,_,i])},t.prototype._RGB_to_CMY=function(t){var e=1-t[0]/255,_=1-t[1]/255,i=1-t[2]/255;return e=Math.round(100*e),_=Math.round(100*_),i=Math.round(100*i),[e,_,i]},t.prototype._CMY_to_RGB=function(t){var e=t[0]/100,_=t[1]/100,i=t[2]/100;return[Math.round(Math.max(0,255*(1-e))),Math.round(Math.max(0,255*(1-_))),Math.round(Math.max(0,255*(1-i)))]},t.prototype._CMY_to_CMYK=function(t){var e=t[0]/100,_=t[1]/100,i=t[2]/100,h=Math.min(i,Math.min(_,Math.min(e,1)));return e=Math.round((e-h)/(1-h)*100),_=Math.round((_-h)/(1-h)*100),i=Math.round((i-h)/(1-h)*100),h=Math.round(100*h),[e,_,i,h]},t.prototype._CMYK_to_CMY=function(t){var e=t[0]/100*(1-t[3]/100)+t[3]/100,_=t[1]/100*(1-t[3]/100)+t[3]/100,i=t[2]/100*(1-t[3]/100)+t[3]/100;return[Math.round(100*e),Math.round(100*_),Math.round(100*i)]},t.prototype._RGB_to_CMYK=function(t){return this._CMY_to_CMYK(this._RGB_to_CMY(t))},t.prototype._CMYK_to_RGB=function(t){return this._CMY_to_RGB(this._CMYK_to_CMY(t))},t.prototype._RGB_to_XYZ=function(){var t,e,_,i=this._getRGBnucleotids(this._colorSpace),h=[this._deGamma(this._normaliz(this.r)),this._deGamma(this._normaliz(this.g)),this._deGamma(this._normaliz(this.b))];if(t=this._arrayProduct(h,i[0]),e=this._arrayProduct(h,i[1]),_=this._arrayProduct(h,i[2]),this._xyz.X=t,this._xyz.Y=e,this._xyz.Z=_,(1==this._doAdapta||1==this._doAdaptaUSER)&&-1!=this._doAdaptaUSER){var s=this._adt_adaptation(this._refWhiteName,this._adtAlg);this._xyz.X=s[0],this._xyz.Y=s[1],this._xyz.Z=s[2]}return[this._xyz.X,this._xyz.Y,this._xyz.Z]},t.prototype._XYZ_to_RGB=function(){var t=this._getRGBnucleotids(this._colorSpace,!0),e=[this._xyz.X,this._xyz.Y,this._xyz.Z];1!=this._doAdapta&&1!=this._doAdaptaUSER||-1==this._doAdaptaUSER||(e=this._adt_invAdaptation(e,this._refWhiteName,this._adtAlg));var _,i,h;_=this._arrayProduct(e,t[0]),i=this._arrayProduct(e,t[1]),h=this._arrayProduct(e,t[2]);var s=[this._normaliz(this._enGamma(_),0,1,255),this._normaliz(this._enGamma(i),0,1,255),this._normaliz(this._enGamma(h),0,1,255)];return this._arrayRound(s),s},t.prototype._XYZ_to_Lab=function(t){var e=[this._xyz.X,this._xyz.Y,this._xyz.Z],_=.008856451679,i=903.2962962963;this._adt_setRefWhite("D65"),!0===t&&(this._getRGBnucleotids("sRGB"),e=this._adt_adaptation("D50",this._adtAlg));var h=e[0]/this._adt_refWhite.X,s=e[1]/this._adt_refWhite.Y,r=e[2]/this._adt_refWhite.Z,a=h>_?Math.pow(h,1/3):(i*h+16)/116,o=s>_?Math.pow(s,1/3):(i*s+16)/116;return[116*o-16,500*(a-o),200*(o-(r>_?Math.pow(r,1/3):(i*r+16)/116))]},t.prototype._LCHab_to_XYZ=function(t){var e=[0,0,0];return e[0]=t[0],e[1]=t[1]*Math.cos(t[2]*Math.PI/180),e[2]=t[1]*Math.sin(t[2]*Math.PI/180),this._Lab_to_XYZ(e,!1)},t.prototype._XYZ_to_LCHab=function(){var t=this._XYZ_to_Lab(t,!1),e=[0,0,0];return e[0]=t[0],e[1]=Math.sqrt(t[1]*t[1]+t[2]*t[2]),e[2]=180*Math.atan2(t[2],t[1])/Math.PI,e[2]<0&&(e[2]+=360),e},t.prototype._Lab_to_XYZ=function(t,e){var _=[0,0,0],i=.008856451679,h=903.2962962963,s={L:t[0],a:t[1],b:t[2]},r=(s.L+16)/116,a=.002*s.a+r,o=r-.005*s.b,n=a*a*a,u=o*o*o,p=n>i?n:(116*a-16)/h,d=s.L>8?Math.pow((s.L+16)/116,3):s.L/h,f=u>i?u:(116*o-16)/h;return!0===e?this._adt_setRefWhite("D50"):this._adt_setRefWhite("D65"),_[0]=p*this._adt_refWhite.X,_[1]=d*this._adt_refWhite.Y,_[2]=f*this._adt_refWhite.Z,this._xyz.X=_[0],this._xyz.Y=_[1],this._xyz.Z=_[2],!0===e&&(this._getRGBnucleotids("sRGB"),_=this._adt_invAdaptation(_,"D50",this._adtAlg)),this._xyz.X=_[0],this._xyz.Y=_[1],this._xyz.Z=_[2],[this._xyz.X,this._xyz.Y,this._xyz.Z]},t.prototype._XYZ_to_xyY=function(){var t=[0,0,0],e=this._xyz.X+this._xyz.Y+this._xyz.Z;return e>0?(t[0]=this._xyz.X/e,t[1]=this._xyz.Y/e):(this._adt_setRefWhite(this._refWhiteName),t[0]=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),t[1]=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z)),t[2]=this._xyz.Y,t},t.prototype._xyY_to_XYZ=function(t){var e=[0,0,0];return t[1]<1e-6?e[0]=e[1]=e[2]=0:(e[0]=t[0]*t[2]/t[1],e[1]=t[2],e[2]=(1-t[0]-t[1])*t[2]/t[1]),this._xyz.X=e[0],this._xyz.Y=e[1],this._xyz.Z=e[2],e},t.prototype._xyY_to_Wavelength=function(t){var e,_=t[0],i=t[1],h=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),s=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),r=0,a=[0,0],o=[0,0],n=[0,0],u=_-h,p=i-s;if(u>=-1e-6&&u<=1e-6&&p>=-1e-6&&p<=1e-6)return 0;for(e=360;e<=830;e+=5){var d=(e-360)/5,f=830==e?0:d+1,l=5*f+360,b=[1299e-7,2321e-7,4149e-7,7416e-7,.001368,.002236,.004243,.00765,.01431,.02319,.04351,.07763,.13438,.21477,.2839,.3285,.34828,.34806,.3362,.3187,.2908,.2511,.19536,.1421,.09564,.05795001,.03201,.0147,.0049,.0024,.0093,.0291,.06327,.1096,.1655,.2257499,.2904,.3597,.4334499,.5120501,.5945,.6784,.7621,.8425,.9163,.9786,1.0263,1.0567,1.0622,1.0456,1.0026,.9384,.8544499,.7514,.6424,.5419,.4479,.3608,.2835,.2187,.1649,.1212,.0874,.0636,.04677,.0329,.0227,.01584,.01135916,.008110916,.005790346,.004109457,.002899327,.00204919,.001439971,.0009999493,.0006900786,.0004760213,.0003323011,.0002348261,.0001661505,117413e-9,8307527e-11,5870652e-11,4150994e-11,2935326e-11,2067383e-11,1455977e-11,1025398e-11,7221456e-12,5085868e-12,3581652e-12,2522525e-12,1776509e-12,1251141e-12],c=[3917e-9,6965e-9,1239e-8,2202e-8,39e-6,64e-6,12e-5,217e-6,396e-6,64e-5,.00121,.00218,.004,.0073,.0116,.01684,.023,.0298,.038,.048,.06,.0739,.09098,.1126,.13902,.1693,.20802,.2586,.323,.4073,.503,.6082,.71,.7932,.862,.9148501,.954,.9803,.9949501,1,.995,.9786,.952,.9154,.87,.8163,.757,.6949,.631,.5668,.503,.4412,.381,.321,.265,.217,.175,.1382,.107,.0816,.061,.04458,.032,.0232,.017,.01192,.00821,.005723,.004102,.002929,.002091,.001484,.001047,74e-5,52e-5,3611e-7,2492e-7,1719e-7,12e-5,848e-7,6e-5,424e-7,3e-5,212e-7,1499e-8,106e-7,74657e-10,52578e-10,37029e-10,26078e-10,18366e-10,12934e-10,9.1093e-7,6.4153e-7,4.5181e-7],x=[6061e-7,.001086,.001946,.003486,.006450001,.01054999,.02005001,.03621,.06785001,.1102,.2074,.3713,.6456,1.0390501,1.3856,1.62296,1.74706,1.7826,1.77211,1.7441,1.6692,1.5281,1.28764,1.0419,.8129501,.6162,.46518,.3533,.272,.2123,.1582,.1117,.07824999,.05725001,.04216,.02984,.0203,.0134,.008749999,.005749999,.0039,.002749999,.0021,.0018,.001650001,.0014,.0011,.001,8e-4,6e-4,34e-5,24e-5,19e-5,1e-4,4999999e-11,3e-5,2e-5,1e-5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=b[d]/(b[d]+c[d]+x[d]),g=c[d]/(b[d]+c[d]+x[d]),R=b[f]/(b[f]+c[f]+x[f]),m=c[f]/(b[f]+c[f]+x[f]),v=y-h,M=g-s,B=R-y,G=m-g,A=(u*M-p*v)/(p*B-u*G);if(!(A<0||A>=1)){var S=Math.abs(u)>=Math.abs(p)?(B*A+v)/u:(G*A+M)/p;a[r]=S,n[r]=e,o[r]=(l-e)*A+e,r+=1}}return 830==n[1]&&a[1]>0?-o[0]:a[0]>=0?o[0]:o[1]},t.prototype._XYZ_to_Luv=function(){var t=[0,0,0];this._adt_setRefWhite("D65");var e=this._xyz.X+15*this._xyz.Y+3*this._xyz.Z,_=e>0?4*this._xyz.X/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z):0,i=e>0?9*this._xyz.Y/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z):0,h=4*this._adt_refWhite.X/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),s=9*this._adt_refWhite.Y/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),r=this._xyz.Y/this._adt_refWhite.Y;return t[0]=r>216/24389?116*Math.pow(r,1/3)-16:24389/27*r,t[1]=13*t[0]*(_-h),t[2]=13*t[0]*(i-s),t},t.prototype._Luv_to_XYZ=function(t){var e={X:0,Y:0,Z:0};this._adt_setRefWhite("D65"),e.Y=t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/(24389/27);var _=4*this._adt_refWhite.X/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),i=9*this._adt_refWhite.Y/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),h=(52*t[0]/(t[1]+13*t[0]*_)-1)/3,s=-5*e.Y,r=e.Y*(39*t[0]/(t[2]+13*t[0]*i)-5);e.X=(r-s)/(h- -1/3),e.Z=e.X*h+s,this._xyz.X=e.X,this._xyz.Y=e.Y,this._xyz.Z=e.Z},t.prototype._hex_to_rgb=function(t){var e,_,i;return 3==t.length?(e=parseInt(t.slice(0,1)+t.slice(0,1),16),_=parseInt(t.slice(1,2)+t.slice(1,2),16),i=parseInt(t.slice(2,3)+t.slice(2,3),16)):6==t.length&&(e=parseInt(t.slice(0,2),16),_=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16)),[e,_,i]},t.prototype._rgb_to_hex=function(t){var e=65536*t[0]+256*t[1]+t[2];for(e=e.toString(16).toUpperCase();e.length<6;)e="0"+e;return e.toString(16).toUpperCase()},t.prototype._normaInputRGB=function(t){var e=!1,_=0;if(3==t.length){if(t[1]>1&&t[1]>1&&t[1]>1)return t;for(_=0;_<t.length;_++)String(t[_]).indexOf(".")>-1&&(e=!0);if(1==e)for(_=0;_<t.length;_++)t[_]=this._normaliz(t[_],0,1,255)}return t},t.prototype._normaOutRGB=function(t){var e=0;for(e=0;e<t.length;e++)t[e]=Math.round(t[e]),(t[e]<0||-0==t[e])&&(t[e]=0);return t},t.prototype._normaOutLab=function(t,e){var _=0;for(_=0;_<t.length;_++)t[_]=e?Math.round(t[_]):+t[_].toFixed(4);return t},t.prototype._normaOutX=function(t,e){var _=0;for(_=0;_<t.length;_++)t[_]=+t[_].toFixed(e);return t},t.prototype._normaInputXYZ=function(t){var e=0;if(t[0]>1||t[1]>1||t[2]>1)for(e=0;e<t.length;e++)t[e]=t[e]/100;return t},t.prototype.setRefWhite=function(t){return 0==arguments.length?this._refWhiteNameUSER="":this._refWhiteNameUSER=t,this},t.prototype.getRefWhite=function(){return this._refWhiteNameUSER.length>0?this._refWhiteNameUSER:this._refWhiteName},t.prototype.rgb=function(){return this._rgbX(arguments,this._COLORSPACES.sRGB)},t.prototype._rgbX=function(t,e){var _=[0,0,0];return this._colorSpace=e,0==t.length?(_=this._XYZ_to_RGB(),this._normaOutRGB(_)):(1==t.length&&(Array.isArray(t[0])?3==t[0].length&&(_=t[0]):"#"==t[0].slice(0,1)&&(_=this._hex_to_rgb(t[0].slice(1,t[0].length)))),3==t.length&&(_[0]=t[0],_[1]=t[1],_[2]=t[2]),this._normaInputRGB(_),this.r=_[0],this.g=_[1],this.b=_[2],this._RGB_to_XYZ(),this)},t.prototype._LabX=function(t,e){var _=[0,0,0];return 0==t.length?(_=this._XYZ_to_Lab(e),this._normaOutLab(_,e),_):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(_=t[0]),3==t.length&&(_[0]=t[0],_[1]=t[1],_[2]=t[2]),this._Lab_to_XYZ(_,e),this)},t.prototype._xyYX=function(t){var e=[0,0,0];return 0==t.length?(e=this._XYZ_to_xyY(),this._normaOutX(e,4),e):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(e=t[0]),3==t.length&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this._xyY_to_XYZ(e),this)},t.prototype._LCHabX=function(t){var e=[0,0,0];return 0==t.length?(e=this._XYZ_to_LCHab(),this._normaOutX(e,4),e):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(e=t[0]),3==t.length&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this._LCHab_to_XYZ(e),this)},t.prototype._LuvX=function(t){var e=[0,0,0];return 0==t.length?(e=this._XYZ_to_Luv(),this._normaOutX(e,4),e):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(e=t[0]),3==t.length&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this._Luv_to_XYZ(e),this)},t.prototype._baseRGB_XXXx=function(t,e){var _=[0,0,0];if(0==t.length||"string"==typeof t[0]){"string"==typeof t[0]&&(this._colorSpace=t[0]);var i=this._XYZ_to_RGB();if("HSL"==e)return this._RGB_to_HSL(i);if("HSL255"==e)return this._RGB_to_HSL_255(i);if("HSLwin"==e)return this._RGB_to_HSL_win239(i);if("HSV"==e||"HSB"==e)return this._RGB_to_HSV(i);if("HWB"==e)return this._RGB_to_HWB(i);if("YUV"==e)return this._RGB_to_YUV(i);if("YCbCr"==e)return this._RGB_to_YCbCr(i);if("JpegYCbCr"==e)return this._RGB_to_JpegYCbCr(i);if("YIQ"==e)return this._RGB_to_YIQ(i);if("YPbPr"==e)return this._RGB_to_YPbPr(i);if("CMY"==e)return this._RGB_to_CMY(i);if("CMYK"==e)return this._RGB_to_CMYK(i)}1!=t.length&&2!=t.length||(this._colorSpace="sRGB","string"==typeof t[1]&&(this._colorSpace=t[3]),Array.isArray(t[0])&&3==t[0].length&&(_=t[0])),(t.length>=3||"string"==typeof t[3])&&(this._colorSpace="sRGB","string"==typeof t[3]&&(this._colorSpace=t[3]),_[0]=t[0],_[1]=t[1],_[2]=t[2],"number"==typeof t[3]&&(_[3]=t[3]));var h=[0,0,0];return"HSL"==e?h=this._HSL_to_RGB([_[0],_[1],_[2]]):"HSL255"==e?h=this._HSL_to_RGB_255([_[0],_[1],_[2]]):"HSLwin"==e?h=this._HSL_to_RGB_win240([_[0],_[1],_[2]]):"HSV"==e||"HSB"==e?h=this._HSV_to_RGB([_[0],_[1],_[2]]):"HWB"==e?h=this._HWB_to_RGB([_[0],_[1],_[2]]):"CMY"==e?h=this._CMY_to_RGB([_[0],_[1],_[2]]):"YUV"==e?h=this._YUV_to_RGB([_[0],_[1],_[2]]):"YCbCr"==e?h=this._YCbCr_to_RGB([_[0],_[1],_[2]]):"JpegYCbCr"==e?h=this._JpegYCbCr_to_RGB([_[0],_[1],_[2]]):"YIQ"==e?h=this._YIQ_to_RGB([_[0],_[1],_[2]]):"YPbPr"==e?h=this._YPbPr_to_RGB_([_[0],_[1],_[2]]):"CMYK"==e&&(h=this._CMYK_to_RGB([_[0],_[1],_[2],_[3]])),this.r=h[0],this.g=h[1],this.b=h[2],this._RGB_to_XYZ(),this},t.prototype.Luv=function(){return this._LuvX(arguments)},t.prototype.xyY=function(){return this._xyYX(arguments)},t.prototype.LabPS=function(){return this._LabX(arguments,!0)},t.prototype.Lab=function(){return this._LabX(arguments,!1)},t.prototype.LCHab=function(){return this._LCHabX(arguments,!1)},t.prototype.HSL=function(){return this._baseRGB_XXXx(arguments,"HSL")},t.prototype.HSL255=function(){return this._baseRGB_XXXx(arguments,"HSL255")},t.prototype.HSL240=function(){return this._baseRGB_XXXx(arguments,"HSLwin")},t.prototype.HSV=function(){return this._baseRGB_XXXx(arguments,"HSV")},t.prototype.HSB=function(){return this._baseRGB_XXXx(arguments,"HSV")},t.prototype.HWB=function(){return this._baseRGB_XXXx(arguments,"HWB")},t.prototype.YPbPr=function(){return this._baseRGB_XXXx(arguments,"YPbPr")},t.prototype.YIQ=function(){return this._baseRGB_XXXx(arguments,"YIQ")},t.prototype.JpegYCbCr=function(){return this._baseRGB_XXXx(arguments,"JpegYCbCr")},t.prototype.YCbCr=function(){return this._baseRGB_XXXx(arguments,"YCbCr")},t.prototype.YUV=function(){return this._baseRGB_XXXx(arguments,"YUV")},t.prototype.CMYK=function(){return this._baseRGB_XXXx(arguments,"CMYK")},t.prototype.CMY=function(){return this._baseRGB_XXXx(arguments,"CMY")},t.prototype.sRGB=function(){return this._rgbX(arguments,this._COLORSPACES.sRGB)},t.prototype.AdobeRGB=function(){return this._rgbX(arguments,this._COLORSPACES.AdobeRGB)},t.prototype.AppleRGB=function(){return this._rgbX(arguments,this._COLORSPACES.AppleRGB)},t.prototype.BestRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BestRGB)},t.prototype.BetaRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BetaRGB)},t.prototype.BruceRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BruceRGB)},t.prototype.CIERGB=function(){return this._rgbX(arguments,this._COLORSPACES.CIERGB)},t.prototype.ColorMatchRGB=function(){return this._rgbX(arguments,this._COLORSPACES.ColorMatchRGB)},t.prototype.DonRGB4=function(){return this._rgbX(arguments,this._COLORSPACES.DonRGB4)},t.prototype.ECIRGBv2=function(){return this._rgbX(arguments,this._COLORSPACES.ECIRGBv2)},t.prototype.EktaSpacePS5=function(){return this._rgbX(arguments,this._COLORSPACES.EktaSpacePS5)},t.prototype.NTSCRGB=function(){return this._rgbX(arguments,this._COLORSPACES.NTSCRGB)},t.prototype.PALSECAMRGB=function(){return this._rgbX(arguments,this._COLORSPACES.PALSECAMRGB)},t.prototype.ProPhotoRGB=function(){return this._rgbX(arguments,this._COLORSPACES.ProPhotoRGB)},t.prototype.SMPTECRGB=function(){return this._rgbX(arguments,this._COLORSPACES.SMPTECRGB)},t.prototype.WideGamutRGB=function(){return this._rgbX(arguments,this._COLORSPACES.WideGamutRGB)},t.prototype.getWavelength=function(t){return+this._xyY_to_Wavelength(this.xyY()).toFixed(4)},t.prototype.getLuma=function(t){var e=this._XYZ_to_RGB();return this._normalizArray(e,0,255,1),"601"==t?.299*e[0]+.587*e[1]+.114*e[2]:"HSP"==t?Math.sqrt(.241*Math.pow(e[0],2)+.691*Math.pow(e[1],2)+.068*Math.pow(e[2],2)):.2126*e[0]+.7152*e[1]+.0722*e[2]},t.prototype.getWCAGluma=function(){for(var t=this._XYZ_to_RGB(),e=[],_=0;_<t.length;_++){var i=t[_]/255;e[_]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},t.prototype.getWCAGcontrastThan=function(t){var e=this.getWCAGluma(),_=t.getWCAGluma();return e>_?(e+.05)/(_+.05):(_+.05)/(e+.05)},t.prototype.getHex=function(){var t=this._XYZ_to_RGB();return"#"+this._rgb_to_hex([t[0],t[1],t[2]])},t.prototype.XYZ=function(){var t=[0,0,0];return 0==arguments.length?t=[this._xyz.X,this._xyz.Y,this._xyz.Z]:(1==arguments.length&&Array.isArray(arguments[0])&&3==arguments[0].length&&(t=arguments[0]),3==arguments.length&&(t[0]=arguments[0],t[1]=arguments[1],t[2]=arguments[2]),this._normaInputXYZ(t),this._xyz.X=t[0],this._xyz.Y=t[1],this._xyz.Z=t[2],this)},t.prototype.colorDiff=function(t,e,_){var i=t.Lab(),h={L:i[0],a:i[1],b:i[2]},s=e.Lab(),r={L:s[0],a:s[1],b:s[2]},a=0;if("DeltaE1976"==_){var o=h.L-r.L,n=h.a-r.a,u=h.b-r.b;a=Math.sqrt(o*o+n*n+u*u)}if("DeltaE1994_T"==_||"DeltaE1994_G"==_){var p="DeltaE1994_T"==_?.048:.045,d="DeltaE1994_T"==_?.014:.015,f="DeltaE1994_T"==_?2:1,l=1,b=1,c=Math.sqrt(h.a*h.a+h.b*h.b),x=Math.sqrt(r.a*r.a+r.b*r.b),y=h.a-r.a,g=h.b-r.b,R=c-x,m=y*y+g*g-R*R,v=m>0?Math.sqrt(m):0,o=h.L-r.L,M=1,B=1+p*c,G=1+d*c,A=o/(f*M),S=R/(l*B),C=v/(b*G);a=Math.sqrt(A*A+S*S+C*C)}if("DeltaE2000"==_){var f=1,l=1,b=1,Y=.5*(h.L+r.L),W=Math.sqrt(h.a*h.a+h.b*h.b),L=Math.sqrt(r.a*r.a+r.b*r.b),P=.5*(W+L),X=P*P*P*P*P*P*P,z=.5*(1-Math.sqrt(X/(X+6103515625))),H=h.a*(1+z),U=r.a*(1+z),w=Math.sqrt(H*H+h.b*h.b),Z=Math.sqrt(U*U+r.b*r.b),O=.5*(w+Z),I=180*Math.atan2(h.b,H)/Math.PI;I<0&&(I+=360);var E=180*Math.atan2(r.b,U)/Math.PI;E<0&&(E+=360);var V=Math.abs(I-E)>180?.5*(I+E+360):.5*(I+E),N=1-.17*Math.cos(Math.PI*(V-30)/180)+.24*Math.cos(Math.PI*(2*V)/180)+.32*Math.cos(Math.PI*(3*V+6)/180)-.2*Math.cos(Math.PI*(4*V-63)/180);if(Math.abs(E-I)<=180)var D=E-I;else var D=E<=I?E-I+360:E-I-360
;var j=r.L-h.L,k=Z-w,F=2*Math.sqrt(w*Z)*Math.sin(Math.PI*(.5*D)/180),M=1+.015*(Y-50)*(Y-50)/Math.sqrt(20+(Y-50)*(Y-50)),B=1+.045*O,G=1+.015*O*N,T=30*Math.exp(-(V-275)/25*((V-275)/25)),q=O*O*O*O*O*O*O,K=Math.sqrt(q/(q+6103515625)),J=-2*K*Math.sin(Math.PI*(2*T)/180);a=Math.sqrt(j/(f*M)*(j/(f*M))+k/(l*B)*(k/(l*B))+F/(b*G)*(F/(b*G))+k/(l*B)*(F/(b*G))*J)}if("DeltaECMC_11"==_||"DeltaECMC_21"==_){if("DeltaECMC_11"==_)var Q=1,$=1;else if("DeltaECMC_21"==_)var Q=2,$=1;for(var W=Math.sqrt(h.a*h.a+h.b*h.b),L=Math.sqrt(r.a*r.a+r.b*r.b),tt=h.L<16?.511:.040975*h.L/(1+.01765*h.L),et=.0638*W/(1+.0131*W)+.638,_t=W<1e-6?0:180*Math.atan2(h.b,h.a)/Math.PI;_t<0;)_t+=360;for(;_t>=360;)_t-=360;var N=_t>=164&&_t<=345?.56+Math.abs(.2*Math.cos(Math.PI*(_t+168)/180)):.36+Math.abs(.4*Math.cos(Math.PI*(_t+35)/180)),it=W*W*W*W,ht=Math.sqrt(it/(it+1900)),st=et*(ht*N+1-ht),o=h.L-r.L,R=W-L,y=h.a-r.a,g=h.b-r.b,rt=y*y+g*g-R*R,at=o/(Q*tt),ot=R/($*et),nt=st;a=Math.sqrt(at*at+ot*ot+rt/(nt*nt))}return+a.toFixed(2)},t.prototype.diff_ECMC11_Than=function(t){return this.colorDiff(this,t,"DeltaECMC_11")},t.prototype.diff_ECMC21_Than=function(t){return this.colorDiff(this,t,"DeltaECMC_21")},t.prototype.diff_DE2000_Than=function(t){return this.colorDiff(this,t,"DeltaE2000")},t.prototype.diff_DE1976_Than=function(t){return this.colorDiff(this,t,"DeltaE1976")},t.prototype.diff_DE1994_GraphicArts_Than=function(t){return this.colorDiff(this,t,"DeltaE1994_G")},t.prototype.diff_DE1994_Textiles_Than=function(t){return this.colorDiff(this,t,"DeltaE1994_T")},e});
